(function(t){function e(e){for(var n,r,i=e[0],l=e[1],c=e[2],d=0,f=[];d<i.length;d++)r=i[d],o[r]&&f.push(o[r][0]),o[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(f.length)f.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,i=1;i<a.length;i++){var l=a[i];0!==o[l]&&(n=!1)}n&&(s.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},o={app:0},s=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0267":function(t,e,a){"use strict";a.d(e,"a",function(){return r}),a.d(e,"b",function(){return u});a("ac6a"),a("5df3"),a("4f7f");var n,o=a("bd86"),s=a("7618");function r(t){var e={};for(var a in t)e[a]=c(t[a]);return{fields:e}}var i=(n={},Object(o["a"])(n,Object(s["a"])(0),"numberValue"),Object(o["a"])(n,Object(s["a"])(""),"stringValue"),Object(o["a"])(n,Object(s["a"])(!1),"boolValue"),n),l=new Set(["numberValue","stringValue","boolValue"]);function c(t){var e={};if(null===t)e.kind="nullValue",e.nullValue="NULL_VALUE";else if(t instanceof Array)e.kind="listValue",e.listValue={values:t.map(c)};else if("object"===Object(s["a"])(t))e.kind="structValue",e.structValue=r(t);else if(Object(s["a"])(t)in i){var a=i[Object(s["a"])(t)];e.kind=a,e[a]=t}else console.warn("Unsupported value type ",Object(s["a"])(t));return e}function u(t){if(!t||!t.fields)return{};var e={};for(var a in t.fields)e[a]=d(t.fields[a]);return e}function d(t){return t&&t.kind?l.has(t.kind)?t[t.kind]:"nullValue"===t.kind?null:"listValue"===t.kind?(t.listValue&&t.listValue.values||console.warn("Invalid JSON list value proto: ",JSON.stringify(t)),t.listValue.values.map(d)):"structValue"===t.kind?u(t.structValue):(console.warn("Unsupported JSON value proto kind: ",t.kind),null):null}},"0819":function(t,e,a){"use strict";var n=a("f25b"),o=a.n(n);o.a},"0e27":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-card",{staticClass:"pa-5",attrs:{outlined:""}},[a("div",{staticClass:"display-1"},[t._v("Ofrecemos los siguientes servicios")]),a("v-divider",{staticClass:"my-4"}),a("v-btn",{staticClass:"mb-4",attrs:{color:"primary",outlined:"",block:""}},[t._v("Transferencias interbancarias")]),a("v-btn",{staticClass:"mb-4",attrs:{color:"primary",outlined:"",block:""}},[t._v("Giros")]),a("v-btn",{staticClass:"mb-4",attrs:{color:"primary",outlined:"",block:""}},[t._v("Servicios públicos")]),a("v-btn",{staticClass:"mb-4",attrs:{color:"primary",outlined:"",block:""}},[t._v("Cambio de moneda")]),a("v-btn",{staticClass:"mb-4",attrs:{color:"primary",outlined:"",block:""}},[t._v("Pago instituciones")])],1)],1)],1)],1)},o=[],s={},r=s,i=a("2877"),l=a("6544"),c=a.n(l),u=a("8336"),d=a("b0af"),f=a("62ad"),p=a("a523"),v=a("ce7e"),m=a("0fd9"),b=Object(i["a"])(r,n,o,!1,null,"614c99ca",null);e["default"]=b.exports;c()(b,{VBtn:u["a"],VCard:d["a"],VCol:f["a"],VContainer:p["a"],VDivider:v["a"],VRow:m["a"]})},"1c2d":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("toolbar"),a("v-content",[a("router-view")],1)],1)},o=[],s={data:function(){return{}}},r=s,i=a("2877"),l=a("6544"),c=a.n(l),u=a("7496"),d=a("a75b"),f=Object(i["a"])(r,n,o,!1,null,"2f5c3310",null);e["default"]=f.exports;c()(f,{VApp:u["a"],VContent:d["a"]})},"3a10":function(t,e,a){},4601:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"keep"}},[a("toolbar"),a("drawer"),t.isDataReady?a("v-content",[a("v-fade-transition",{attrs:{mode:"out-in"}},[a("router-view")],1)],1):t._e(),a("v-overlay",{attrs:{value:t.overlay}},[a("v-progress-circular",{attrs:{size:70,width:3,color:"primary",indeterminate:""}}),a("p",{staticClass:"ml-n3"},[t._v(t._s(t.overlayText))])],1)],1)},o=[],s=a("bc3a"),r=a.n(s),i={props:{source:String},data:function(){return{drawer:null,items:[{icon:"lightbulb_outline",text:"Intenciones",to:"intent"}],isDataReady:!1}},mounted:function(){this.getInitialData(),this.$store.dispatch("initialLoad")},methods:{getInitialData:function(){var t=this;this.$store.dispatch("showOverlay",{active:!0,text:"Cargando datos"}),r.a.get("/api/chatbot/agent/intents").then(function(e){e.data.ok?(console.log(e.data),console.log("datos conseguidos:"),t.$store.dispatch("setIntents",e.data.payload),t.isDataReady=!0):console.error(e.data)}).catch(function(e){if("ECONNABORTED"!==e.code)throw console.log(e),e;console.log("se excedio el tiempo limite"),t.$store.dispatch("showSnackbar",{text:"Algo salió mal",color:"error"})}).finally(function(){t.$store.dispatch("showOverlay",{active:!1,text:"Cargando datos"})})}},computed:{overlay:function(){return this.$store.state.overlay.active},overlayText:function(){return this.$store.state.overlay.text}}},l=i,c=(a("99f1"),a("2877")),u=a("6544"),d=a.n(u),f=a("7496"),p=a("a75b"),v=a("0789"),m=a("a797"),b=a("490a"),h=Object(c["a"])(l,n,o,!1,null,null,null);e["default"]=h.exports;d()(h,{VApp:f["a"],VContent:p["a"],VFadeTransition:v["c"],VOverlay:m["a"],VProgressCircular:b["a"]})},"559a":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{"grid-list-xs":""}},[a("v-layout",{staticClass:"mb-4",attrs:{"align-center":""}},[a("span",{staticClass:"display-1"},[t._v("Gestión del menú persistente")]),a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({staticClass:"ml-4",attrs:{color:"primary"}},n),[t._v("Añadir opción")])]}}])},[a("v-list",[a("v-list-item",{on:{click:function(e){return t.addLinkButton()}}},[a("v-list-item-title",[t._v("De tipo enlace")])],1),a("v-list-item",{on:{click:function(e){return t.addPostbackButton()}}},[a("v-list-item-title",[t._v("De tipo postback")])],1)],1)],1)],1),t._l(t.buttons,function(e,n){return a("div",{key:n},[a("v-card",{staticClass:"mb-4 pa-5",attrs:{outlined:""}},[a("v-layout",{attrs:{"justify-space-between":""}},[a("span",{staticClass:"title mb-3"},[t._v("Configuración del botón "+t._s(n+1))]),a("v-btn",{attrs:{color:"error"},on:{click:function(e){return t.deleteButton(n)}}},[t._v("Eliminar")])],1),a("v-text-field",{attrs:{outlined:"",label:"Nombre del botón"},model:{value:e.title,callback:function(a){t.$set(e,"title",a)},expression:"button.title"}}),a("p",{staticClass:"body-1"},[t._v("Tipo de botón")]),a("v-radio-group",{on:{change:function(a){return t.updateBtnStructure(n,e.type,e)}},model:{value:e.type,callback:function(a){t.$set(e,"type",a)},expression:"button.type"}},[a("v-radio",{attrs:{label:"POSTBACK",value:"postback"}}),a("v-radio",{attrs:{label:"ENLACE WEB",value:"web_url"}})],1),"postback"==e.type?a("v-text-field",{attrs:{outlined:"",label:"Mensaje de emparejamiento"},model:{value:e.payload,callback:function(a){t.$set(e,"payload",a)},expression:"button.payload"}}):a("v-text-field",{attrs:{outlined:"",label:"Dirección URL"},model:{value:e.url,callback:function(a){t.$set(e,"url",a)},expression:"button.url"}})],1)],1)}),a("v-btn",{attrs:{color:"success"},on:{click:function(e){return t.save(t.buttons)}}},[t._v("Guardar")])],2)},o=[],s=a("bc3a"),r=a.n(s),i={data:function(){return{buttons:[],radioGroup:1}},mounted:function(){this.initialData()},methods:{initialData:function(){var t=this;r.a.get("/api/chatbot/agent/persistantmenu/list").then(function(e){e.data.ok?(console.log(e.data),t.buttons=e.data.payload):console.error(e.data)}).catch(function(t){console.log(t)})},addLinkButton:function(){this.buttons.push({title:"View Website",type:"web_url",url:"http://www.myapple.com"})},addPostbackButton:function(){this.buttons.push({type:"postback",title:"Nuevas noticias",payload:"FUN_NEWS"})},save:function(t){var e=this;this.$store.dispatch("showOverlay",{active:!0,text:"Guardando Cambios"}),r.a.post("/api/chatbot/agent/persistantmenu",{buttons:t}).then(function(t){t.data.ok?console.log(t.data):console.error(t.data)}).catch(function(t){console.log(t)}).finally(function(){e.$store.dispatch("showOverlay",{active:!1,text:""})})},deleteButton:function(t){this.buttons.splice(t,1)},updateBtnStructure:function(t,e,a){var n={title:a.title,type:"postback",payload:""},o={title:a.title,type:"web_url",url:""};"postback"==e?this.buttons.splice(t,1,n):this.buttons.splice(t,1,o)}}},l=i,c=a("2877"),u=a("6544"),d=a.n(u),f=a("8336"),p=a("b0af"),v=a("a523"),m=a("a722"),b=a("8860"),h=a("da13"),g=a("5d23"),_=a("e449"),y=a("67b6"),x=a("43a6"),k=a("8654"),V=Object(c["a"])(l,n,o,!1,null,"08f93446",null);e["default"]=V.exports;d()(V,{VBtn:f["a"],VCard:p["a"],VContainer:v["a"],VLayout:m["a"],VList:b["a"],VListItem:h["a"],VListItemTitle:g["b"],VMenu:_["a"],VRadio:y["a"],VRadioGroup:x["a"],VTextField:k["a"]})},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),o=(a("5363"),a("f309"));n["a"].use(o["a"]);var s=new o["a"]({icons:{iconfont:"mdi"}}),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("v-app",[a("router-view"),a("snackbar")],1)],1)},i=[],l=a("2877"),c=a("6544"),u=a.n(c),d=a("7496"),f={},p=Object(l["a"])(f,r,i,!1,null,null,null),v=p.exports;u()(p,{VApp:d["a"]});var m=a("8c4f"),b=a("1858"),h=a.n(b);n["a"].use(m["a"]);var g=[{path:"/dashboard",component:a("4601").default,meta:{requiresAuth:!0},children:[{path:"",name:"dashboard",redirect:{name:"intent"}},{path:"intenciones",name:"intent",component:a("7761").default},{path:"intenciones/:id",name:"updateIntent",component:a("ca63").default},{path:"menu-persistente",name:"persistantMenu",component:a("559a").default},{path:"agencias",name:"agencies",component:a("fff1").default}]},{path:"/",component:a("1c2d").default,meta:{guest:!0},children:[{path:"",redirect:"/login"},{path:"/login",name:"login",component:a("bd01").default},{path:"registro",name:"register",component:a("6d75").default}]},{path:"/webview",component:a("0e27").default},{path:"*",component:a("ff18").default}],_=new m["a"]({routes:g,mode:"history"});_.beforeEach(function(t,e,a){if(t.matched.some(function(t){return t.meta.requiresAuth}))if(null==h.a.getItem("token"))a({name:"login",params:{nextUrl:t.fullPath}});else{var n=JSON.parse(h.a.getItem("user"));t.matched.some(function(t){return t.meta.requiresAuth})?"ADMIN"==n.role?a():a({name:"dashboard"}):a()}else t.matched.some(function(t){return t.meta.guest})?null==h.a.getItem("token")?a():a({name:"dashboard"}):a()});var y=_,x=a("2f62"),k=a("bc3a"),V=a.n(k);n["a"].prototype.$axios=V.a,n["a"].use(x["a"]);var w=new x["a"].Store({state:{status:"",token:h.a.getItem("token")||"",user:JSON.parse(h.a.getItem("user"))||{},intents:[],loggingIn:!1,loginError:null,loginSuccessful:!1,snackbar:{text:"",active:!1,color:"success"},toolbar:{drawerIcon:null},overlay:{active:!1,text:""}},mutations:{auth_request:function(t){t.status="loading"},setIntents:function(t,e){t.intents=e},logout:function(t){t.status="",t.token="",t.loggingIn=!1},auth_success:function(t,e){var a=e.token,n=e.user;t.status="success",t.token=a,t.user=n,t.loggingIn=!0},auth_error:function(t){t.status="error"},showSnackbar:function(t,e){var a=e.text,n=e.color;t.snackbar.text=a,t.snackbar.color=n,t.snackbar.active=!0},initialLoad:function(t){t.loggingIn=!0,t.loggingIn=!0},showOverlay:function(t,e){var a=e.active,n=e.text;t.overlay.active=a,t.overlay.text=n}},actions:{showSnackbar:function(t,e){var a=t.commit,n=e.text,o=e.color;a("showSnackbar",{text:n,color:o})},showOverlay:function(t,e){var a=t.commit,n=e.active,o=e.text;a("showOverlay",{active:n,text:o})},register:function(t,e){var a=t.commit;return new Promise(function(t,n){a("auth_request"),V.a.post("/api/register",{first_name:e.first_name,last_name:e.last_name,email:e.email,password:e.password}).then(function(e){e.data.ok?t(e.data.message):console.error(e.data)}).catch(function(t){n(t),console.log(t)})})},login:function(t,e){var a=t.commit;return new Promise(function(t,n){a("auth_request"),V.a.post("/api/login",{email:e.email,password:e.password}).then(function(e){if(e.data.ok){console.log(e.data);var n=e.data.token,o=e.data.payload;h.a.setItem("token",n),h.a.setItem("user",JSON.stringify(o)),V.a.defaults.headers.common["Authorization"]=n,a("auth_success",{token:n,user:o}),t(e.data.message)}}).catch(function(t){a("auth_error"),h.a.removeItem("token"),t.response&&(console.error(t.response.data),n(t))})})},setIntents:function(t,e){var a=t.commit;a("setIntents",e)},logout:function(t){var e=t.commit;e("logout"),h.a.removeItem("token")},initialLoad:function(t){var e=t.commit;e("initialLoad")}},getters:{isLoggedIn:function(t){return!!t.token},authStatus:function(t){return t.status}}}),T=(a("3a10"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("p",[t._v("\n    Tiempo transcurrido:\n    "+t._s(t.hours)+" :\n    "+t._s(t._f("zeroPad")(t.minutes))+" :\n    "+t._s(t._f("zeroPad")(t.seconds))+" :\n    "+t._s(t._f("zeroPad")(t.milliSeconds,3))+"\n  ")]),t.isRunning?t._e():a("v-btn",{attrs:{outline:"",color:"primary",dark:""},on:{click:t.startTimer}},[t._v("EMPEZAR")]),t.isRunning?a("v-btn",{attrs:{outline:"",color:"success",dark:"",disabled:!t.isRunning},on:{click:t.pushTime}},[t._v("VUELTA")]):t._e(),t.isRunning?a("v-btn",{attrs:{outline:"",color:"error",dark:"",disabled:!t.isRunning},on:{click:t.stopTimer}},[t._v("DETENER")]):t._e(),t.isRunning?a("v-btn",{attrs:{outline:"",color:"black",dark:""},on:{click:t.clearAll}},[t._v("BORRAR")]):t._e(),a("ul",t._l(t.laps,function(e){return a("li",[t._v("\n      "+t._s(e.hours)+" :\n      "+t._s(t._f("zeroPad")(e.minutes))+" :\n      "+t._s(t._f("zeroPad")(e.seconds))+" :\n      "+t._s(t._f("zeroPad")(e.milliSeconds,3))+"\n    ")])}),0)],1)}),C=[],I=(a("6b54"),a("f576"),{mounted:function(){console.log("esto hay en laps: ",this.laps)},props:["laps"],data:function(){return{times:[],animateFrame:0,nowTime:0,diffTime:0,startTime:0,isRunning:!1}},methods:{setSubtractStartTime:function(t){t="undefined"!==typeof t?t:0;this.startTime=Math.floor(performance.now()-t)},startTimer:function(){var t=this;t.setSubtractStartTime(t.diffTime),function e(){t.nowTime=Math.floor(performance.now()),t.diffTime=t.nowTime-t.startTime,t.animateFrame=requestAnimationFrame(e)}(),t.isRunning=!0},stopTimer:function(){this.$emit("stop",this.times),this.isRunning=!1,cancelAnimationFrame(this.animateFrame)},pushTime:function(){this.times.push({hours:this.hours,minutes:this.minutes,seconds:this.seconds,milliSeconds:this.milliSeconds})},clearAll:function(){this.startTime=0,this.nowTime=0,this.diffTime=0,this.times=[],this.stopTimer(),this.animateFrame=0}},computed:{hours:function(){return Math.floor(this.diffTime/1e3/60/60)},minutes:function(){return Math.floor(this.diffTime/1e3/60)%60},seconds:function(){return Math.floor(this.diffTime/1e3)%60},milliSeconds:function(){return Math.floor(this.diffTime%1e3)}},filters:{zeroPad:function(t,e){e="undefined"!==typeof e?e:2;return t.toString().padStart(e,"0")}}}),$=I,O=a("8336"),S=Object(l["a"])($,T,C,!1,null,"30f75174",null),j=S.exports;u()(S,{VBtn:O["a"]});var R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.jsonData?a("v-card",{staticClass:"pa-5",attrs:{outlined:""}},[a("strong",[t._v("Rich message de tipo: "+t._s(t.getType(t.jsonData)))]),a(t.selectRichMessage(t.getType(t.jsonData)),{tag:"component",attrs:{data:t.jsonData},on:{onSave:function(e){return t.updateParent(t.jsonData,t.index)}}})],1):t._e()},A=[],E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-dialog",{attrs:{persistent:"",width:"800"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({attrs:{color:"primary",dark:""}},n),[t._v("Editar")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[t._v("Mensaje tipo botón")]),a("v-spacer"),a("v-btn",{attrs:{color:"error"},on:{click:function(e){t.dialog=!1}}},[a("v-icon",{attrs:{color:"white"}},[t._v("mdi-close")])],1)],1),a("v-container",[a("v-layout",{attrs:{"justify-center":""}},[a("v-flex",{attrs:{sm11:""}},[a("v-text-field",{attrs:{clearable:"",label:"Mensaje"},model:{value:t.buttonMessage,callback:function(e){t.buttonMessage=e},expression:"buttonMessage"}}),a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs6:""}},t._l(t.buttonsList,function(e,n){return a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{clearable:"",outlined:"",counter:20,rules:t.buttonTextRules,label:"Texto del boton "+(n+1)},model:{value:e.title,callback:function(a){t.$set(e,"title",a)},expression:"button.title"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{clearable:"",outlined:"",label:"URL del boton "+(n+1)},model:{value:e.url,callback:function(a){t.$set(e,"url",a)},expression:"button.url"}})],1)],1)}),1),a("v-flex",{attrs:{xs6:""}},[a("v-card",{staticClass:"ml-3 pa-3"},[a("strong",[t._v("Vista previa del rich message:")]),a("p",[t._v(t._s(t.buttonMessage))]),t._l(t.buttonsList,function(e){return a("div",[a("v-btn",{attrs:{block:"",color:"primary",outlined:""}},[t._v(t._s(e.title))])],1)})],2)],1)],1),a("v-card-actions",[a("v-btn",{attrs:{color:"primary",outlined:""},on:{click:t.addButton}},[t._v("Añadir otro botón (MAX 3)")]),a("v-btn",{staticClass:"ml-3",attrs:{color:"success",outlined:""},on:{click:function(e){t.dialog=!1,t.save()}}},[t._v("Guardar")])],1)],1)],1)],1)],1)],1),a("v-layout",{attrs:{"justify-center":""}},[a("v-flex",{attrs:{sm6:""}},[a("v-card",{staticClass:"ml-3 pa-3"},[a("strong",[t._v("Vista previa del rich message:")]),a("p",[t._v(t._s(t.buttonMessage))]),t._l(t.buttonsList,function(e){return a("div",[a("v-btn",{attrs:{block:"",color:"primary",outlined:""}},[t._v(t._s(e.title))])],1)})],2)],1)],1)],1)},L=[],P={mounted:function(){},props:["data"],data:function(){return{dialog:!1,buttonTextRules:[function(t){return!!t||"Nombre es requerido"},function(t){return t&&t.length<=10||"Si superas los 20 caracteres, las sobrantes aparecerán como '...'"}]}},computed:{buttonsList:function(){return this.data.facebook.attachment.payload.buttons},buttonMessage:{get:function(){return this.data.facebook.attachment.payload.text},set:function(t){this.data.facebook.attachment.payload.text=t}}},methods:{addButton:function(){this.data.facebook.attachment.payload.buttons.push({type:"web_url",title:"ejemplo",url:"https://developers.facebook.com/docs/messenger-platform/send-messages/template/list"})},save:function(){this.$emit("onSave")},updateBtnStructure:function(){var t={title:button.title,type:"postback",payload:""},e={title:button.title,type:"web_url",url:""};"postback"==type?this.generics[screenIndex].buttons.splice(buttonIndex,1,t):this.generics[screenIndex].buttons.splice(buttonIndex,1,e)}}},M=P,D=a("b0af"),N=a("99d9"),q=a("a523"),B=a("169a"),F=a("0e8f"),U=a("132d"),J=a("a722"),z=a("2fa4"),G=a("8654"),W=a("71d9"),Q=a("2a7f"),X=Object(l["a"])(M,E,L,!1,null,"0ff93191",null),H=X.exports;u()(X,{VBtn:O["a"],VCard:D["a"],VCardActions:N["a"],VContainer:q["a"],VDialog:B["a"],VFlex:F["a"],VIcon:U["a"],VLayout:J["a"],VSpacer:z["a"],VTextField:G["a"],VToolbar:W["a"],VToolbarTitle:Q["a"]});var Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[0==t.rerender?a("v-dialog",{attrs:{persistent:"",width:"800"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({attrs:{color:"primary",dark:""}},n),[t._v("Editar")])]}}],null,!1,2187337199),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[t._v("Mensaje tipo generic")]),a("v-spacer"),a("v-btn",{attrs:{color:"error"},on:{click:function(e){t.dialog=!1}}},[a("v-icon",{attrs:{color:"white"}},[t._v("mdi-close")])],1)],1),a("v-container",{attrs:{"grid-list-lg":""}},[a("v-tabs",{attrs:{"background-color":"primary",centered:"",dark:"","icons-and-text":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tabs-slider"),t._l(t.generics,function(e,n){return a("v-tab",{key:n,attrs:{href:"#tab-"+n}},[t._v("Pantalla "+t._s(n+1))])})],2),a("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(t.generics,function(e,n){return a("v-tab-item",{key:n,attrs:{value:"tab-"+n}},[a("v-layout",{staticClass:"mb-4",attrs:{wrap:"","align-center":""}},[a("v-flex",{attrs:{sm6:""}},[a("v-text-field",{attrs:{label:"titulo"},model:{value:e.title,callback:function(a){t.$set(e,"title",a)},expression:"generic.title"}})],1),a("v-flex",{attrs:{sm6:""}},[a("v-text-field",{attrs:{label:"descripcion"},model:{value:e.subtitle,callback:function(a){t.$set(e,"subtitle",a)},expression:"generic.subtitle"}})],1),a("v-flex",{attrs:{sm12:""}},[a("v-text-field",{attrs:{clearable:"",label:"link imagen"},model:{value:e.image_url,callback:function(a){t.$set(e,"image_url",a)},expression:"generic.image_url"}})],1),a("v-flex",{attrs:{sm12:""}},[a("v-layout",{attrs:{"align-center":""}},[a("span",{staticClass:"body-1"},[t._v("Orden de aparición de la pantalla: "+t._s(n+1))]),a("v-dialog",{attrs:{persistent:"",width:"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a("v-btn",t._g({staticClass:"ml-3",attrs:{color:"primary"},on:{click:function(e){return t.showOrder(n+1)}}},o),[t._v("modificar")])]}}],null,!0),model:{value:t.dialog2,callback:function(e){t.dialog2=e},expression:"dialog2"}},[a("v-card",[a("v-card-title",[a("v-text-field",{attrs:{name:"Orden",label:"Orden",id:"id"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updateOrderScreen(n,t.orderScreen)}},model:{value:t.orderScreen,callback:function(e){t.orderScreen=e},expression:"orderScreen"}})],1)],1)],1)],1)],1)],1),a("strong",[t._v("Botones")]),t._l(e.buttons,function(e,o){return a("div",{key:"loop"+o},[a("span",{staticClass:"title"},[t._v("Boton "+t._s(o+1))]),a("v-btn",{staticClass:"ml-4",attrs:{small:"",color:"error"},on:{click:function(e){return t.deleteButton(n,o)}}},[t._v("Eliminar")]),a("v-text-field",{attrs:{label:"texto del boton",counter:20,rules:t.buttonTextRules},model:{value:e.title,callback:function(a){t.$set(e,"title",a)},expression:"button.title"}}),a("p",{staticClass:"body-1"},[t._v("Tipo de botón")]),a("v-radio-group",{on:{change:function(a){return t.updateBtnStructure(e.type,o,e,n)}},model:{value:e.type,callback:function(a){t.$set(e,"type",a)},expression:"button.type"}},[a("v-radio",{attrs:{label:"POSTBACK",value:"postback"}}),a("v-radio",{attrs:{label:"ENLACE WEB",value:"web_url"}})],1),"postback"==e.type?a("v-text-field",{attrs:{clearable:"",outlined:"",label:"Mensaje de emparejamiento"},model:{value:e.payload,callback:function(a){t.$set(e,"payload",a)},expression:"button.payload"}}):a("v-text-field",{attrs:{clearable:"",outlined:"",label:"Dirección URL"},model:{value:e.url,callback:function(a){t.$set(e,"url",a)},expression:"button.url"}})],1)}),a("v-layout",{attrs:{"justify-center":""}},[a("v-flex",{attrs:{sm11:""}},[a("v-layout",{attrs:{row:"","justify-center":""}},[a("v-flex",{attrs:{xs6:""}},[a("v-card",{staticClass:"ml-3 pa-3"},[a("strong",[t._v("Vista previa del rich message:")]),e.image_url?a("v-img",{attrs:{src:e.image_url,"aspect-ratio":"1.7",contain:""}}):t._e(),a("strong",[t._v(t._s(e.title))]),a("p",[t._v(t._s(e.subtitle))]),t._l(e.buttons,function(e){return a("div",[a("v-btn",{attrs:{color:"primary",outlined:"",block:""}},[t._v(t._s(e.title))])],1)})],2)],1)],1)],1)],1)],2)}),1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"success"},on:{click:function(e){t.dialog=!1}}},[t._v("Guardar")])],1)],1)],1)],1):t._e(),a("v-layout",{attrs:{"justify-center":""}},[a("v-flex",{attrs:{sm11:""}},[a("v-layout",{attrs:{row:"","justify-center":""}},t._l(t.generics,function(e,n){return a("v-flex",{key:n,attrs:{sm3:""}},[a("v-btn",{attrs:{small:"",color:"error"},on:{click:function(e){return t.deleteGeneric(n)}}},[t._v("Eliminar")]),a("v-card",{staticClass:"ml-3 pa-3"},[a("strong",[t._v("Vista previa del rich message:")]),e.image_url?a("v-img",{attrs:{src:e.image_url,"aspect-ratio":"1.7",contain:""}}):t._e(),a("strong",[t._v(t._s(e.title))]),a("p",[t._v(t._s(e.subtitle))]),t._l(e.buttons,function(e){return a("div",[a("v-btn",{attrs:{color:"primary",outlined:"",block:""}},[t._v(t._s(e.title))])],1)})],2)],1)}),1),a("v-btn",{attrs:{color:"primary",outlined:""},on:{click:t.addGeneric}},[t._v("Añadir otra pantalla")])],1)],1)],1)},K=[],Z={props:["data"],data:function(){return{dialog:!1,dialog2:!1,tab:null,orderScreen:0,rerender:!1,buttonTextRules:[function(t){return!!t||"Nombre es requerido"},function(t){return t&&t.length<=10||"Si superas los 20 caracteres, las sobrantes aparecerán como '...'"}]}},mounted:function(){console.log("generic recibido: ",this.data)},computed:{generics:function(){return this.data.facebook.attachment.payload.elements}},methods:{deleteGeneric:function(t){this.generics.splice(t,1)},updateOrderScreen:function(t,e){var a=this;console.log("el indice de origen: ",t),console.log("el indice de destino: ",e),this.dialog2=!1;var n=JSON.parse(JSON.stringify(this.generics[t])),o=JSON.parse(JSON.stringify(this.generics[e-1]));this.generics[t]=o,this.generics[e-1]=n,this.rerender=!0,setTimeout(function(){a.rerender=!1},300),this.tab=e-1,console.log("el indice del tab: ",this.tab+1)},showOrder:function(t){this.orderScreen=t},updateBtnStructure:function(t,e,a,n){var o={title:a.title,type:"postback",payload:""},s={title:a.title,type:"web_url",url:""};"postback"==t?this.generics[n].buttons.splice(e,1,o):this.generics[n].buttons.splice(e,1,s),console.log("la nueva estructura es:",this.generics[n].buttons[e])},addGeneric:function(){console.log("anadiendo screen"),this.data.facebook.attachment.payload.elements.push({title:"PANTALLA 01",image_url:"https://miro.medium.com/max/4000/1*m9IJdAYW04MYh75ivpwUNA.png",subtitle:"Descripcion de la pantalla 01",buttons:[{type:"postback",title:"boton 01",payload:"button1_payload"},{type:"postback",title:"boton 02",payload:"button2_payload"},{type:"postback",title:"boton 03",payload:"button3_payload"}]})},deleteButton:function(t,e){this.generics[t].buttons.splice(e,1)}}},tt=Z,et=a("adda"),at=a("67b6"),nt=a("43a6"),ot=a("71a3"),st=a("c671"),rt=a("fe57"),it=a("aac8"),lt=a("9a96"),ct=Object(l["a"])(tt,Y,K,!1,null,"b8c4436c",null),ut=ct.exports;u()(ct,{VBtn:O["a"],VCard:D["a"],VCardActions:N["a"],VCardTitle:N["c"],VContainer:q["a"],VDialog:B["a"],VFlex:F["a"],VIcon:U["a"],VImg:et["a"],VLayout:J["a"],VRadio:at["a"],VRadioGroup:nt["a"],VSpacer:z["a"],VTab:ot["a"],VTabItem:st["a"],VTabs:rt["a"],VTabsItems:it["a"],VTabsSlider:lt["a"],VTextField:G["a"],VToolbar:W["a"],VToolbarTitle:Q["a"]});var dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-dialog",{attrs:{width:"800"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({attrs:{color:"primary",dark:""}},n),[t._v("Editar")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"secondary",dark:""}},[a("v-toolbar-title",[t._v("Mensaje tipo Quick Reply")])],1),a("v-container",[a("v-layout",{attrs:{"justify-center":""}},[a("v-flex",{attrs:{sm11:""}},[a("p",[t._v("Mensaje que acompaña las opciones del quick reply")]),a("v-text-field",{attrs:{outlined:""},model:{value:t.quick_replies_message.text,callback:function(e){t.$set(t.quick_replies_message,"text",e)},expression:"quick_replies_message.text"}}),t._l(t.quick_replies,function(e,n){return a("div",[a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{outlined:"",label:"Texto del quick reply "+(n+1)},model:{value:e.title,callback:function(a){t.$set(e,"title",a)},expression:"reply.title"}}),a("v-text-field",{attrs:{outlined:"",label:"Mensaje de emparejamiento (Para dialogflow)"},model:{value:e.payload,callback:function(a){t.$set(e,"payload",a)},expression:"reply.payload"}}),a("v-text-field",{attrs:{outlined:"",label:"URL de la imagen "+(n+1)},model:{value:e.image_url,callback:function(a){t.$set(e,"image_url",a)},expression:"reply.image_url"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-card",{staticClass:"ml-3 pa-3"},[a("div",[a("strong",[t._v("Vista previa:")])]),a("v-layout",{attrs:{"justify-center":""}},[a("v-btn",{staticClass:"text-center mr-4",attrs:{rounded:"",outlined:"",color:"primary"}},[a("v-img",{staticClass:"imgButton",attrs:{src:e.image_url,"aspect-ratio":"1.7",contain:""}}),t._v("\n                        "+t._s(e.title)+"\n                      ")],1)],1)],1),a("v-layout",{attrs:{"justify-center":""}},[a("v-btn",{attrs:{color:"error",outlined:""},on:{click:function(e){return t.deleteReply(n)}}},[t._v("Eliminar")])],1)],1)],1),a("div",{staticClass:"line"})],1)}),a("v-btn",{attrs:{color:"primary",outlined:""},on:{click:t.addQuickReply}},[t._v("Añadir otro botón (MAX 13)")])],2)],1)],1)],1)],1),a("v-layout",{attrs:{"justify-center":""}},[a("v-flex",{attrs:{sm6:""}},[a("v-card",{staticClass:"ml-3 pa-3"},[a("div",[a("strong",[t._v("Vista previa del rich message:")])]),a("v-divider"),a("p",[t._v(t._s(t.quick_replies_message.text))]),t._l(t.quick_replies,function(e,n){return a("v-btn",{staticClass:"text-center",attrs:{rounded:"",outlined:"",color:"primary"}},[t._v(t._s(e.title))])})],2)],1)],1)],1)},ft=[],pt={props:["data"],data:function(){return{dialog:!1}},computed:{quick_replies:function(){return this.data.facebook.quick_replies},quick_replies_message:function(){return this.data.facebook}},methods:{addQuickReply:function(){this.data.facebook.quick_replies.push({content_type:"text",title:"reply",payload:"reply_payload",image_url:""})},deleteReply:function(t){this.data.facebook.quick_replies.splice(t,1)}}},vt=pt,mt=(a("64fb"),a("ce7e")),bt=Object(l["a"])(vt,dt,ft,!1,null,"9d9aaf06",null),ht=bt.exports;u()(bt,{VBtn:O["a"],VCard:D["a"],VContainer:q["a"],VDialog:B["a"],VDivider:mt["a"],VFlex:F["a"],VImg:et["a"],VLayout:J["a"],VTextField:G["a"],VToolbar:W["a"],VToolbarTitle:Q["a"]});var gt=a("0267"),_t={props:["data","index"],data:function(){return{jsonData:null,components:[H,ut,ht]}},mounted:function(){this.jsonData=this.data,this.jsonData=this.structToJson(this.jsonData)},methods:{getType:function(t){return t.facebook.hasOwnProperty("attachment")?t.facebook.attachment.payload.template_type:t.facebook.hasOwnProperty("quick_replies")?"quick_reply":void 0},selectRichMessage:function(t){switch(t){case"button":return this.components[0];case"generic":return this.components[1];case"quick_reply":return this.components[2];default:break}},structToJson:function(t){return Object(gt["b"])(t)},updateParent:function(t,e){this.$emit("onSave",{data:t,index:e})}}},yt=_t,xt=Object(l["a"])(yt,R,A,!1,null,"39ce6ef2",null),kt=xt.exports;u()(xt,{VCard:D["a"]});var Vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app-bar",{attrs:{app:"",dark:"","clipped-left":"",color:"#1867C0"}},[a("v-app-bar-nav-icon",{on:{click:function(e){t.$store.state.toolbar.drawerIcon=!t.$store.state.toolbar.drawerIcon}}}),a("span",{staticClass:"title ml-3 mr-5"},[a("span",{staticClass:"font-weight-light"},[t._v("Charly Bot")])]),a("v-spacer"),t.$store.state.loggingIn?t._e():a("v-btn",{attrs:{color:"white",to:{name:"login"},outlined:""},on:{click:t.goToLogin}},[t._v("Iniciar Sesión")]),t.$store.state.loggingIn?t._e():a("v-btn",{attrs:{color:"white",to:{name:"register"},outlined:""}},[t._v("Registro")]),t.$store.state.loggingIn?a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({attrs:{text:"",color:"white"}},n),[t._v("\n        "+t._s(t.$store.state.user.first_name)+"\n        "),a("v-icon",[t._v("mdi-menu-down")])],1)]}}],null,!1,1348566953)},[a("v-list",[a("v-list-item",{on:{click:function(e){return t.logout()}}},[a("v-list-item-title",[t._v("Cerrar sesion")])],1)],1)],1):t._e()],1)},wt=[],Tt={methods:{goToLogin:function(){console.log("login")},logout:function(){this.$store.dispatch("logout"),this.$router.push({name:"login"})}}},Ct=Tt,It=a("40dc"),$t=a("5bc1"),Ot=a("8860"),St=a("da13"),jt=a("5d23"),Rt=a("e449"),At=Object(l["a"])(Ct,Vt,wt,!1,null,"0dbea33f",null),Et=At.exports;u()(At,{VAppBar:It["a"],VAppBarNavIcon:$t["a"],VBtn:O["a"],VIcon:U["a"],VList:Ot["a"],VListItem:St["a"],VListItemTitle:jt["b"],VMenu:Rt["a"],VSpacer:z["a"]});var Lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-snackbar",{attrs:{timeout:3e3,color:t.colorSnackbar},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n  "+t._s(t.$store.state.snackbar.text)+"\n  "),a("v-btn",{attrs:{dark:"",text:""},on:{click:function(e){t.$store.state.snackbar.active=!1}}},[t._v("Cerrar")])],1)},Pt=[],Mt={computed:{snackbar:{get:function(){return this.$store.state.snackbar.active},set:function(t){this.$store.state.snackbar.active=t}},colorSnackbar:function(){return this.$store.state.snackbar.color}}},Dt=Mt,Nt=a("2db4"),qt=Object(l["a"])(Dt,Lt,Pt,!1,null,"9376c636",null),Bt=qt.exports;u()(qt,{VBtn:O["a"],VSnackbar:Nt["a"]});var Ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-navigation-drawer",{attrs:{clipped:"",app:"",color:"grey lighten-4"},model:{value:t.$store.state.toolbar.drawerIcon,callback:function(e){t.$set(t.$store.state.toolbar,"drawerIcon",e)},expression:"$store.state.toolbar.drawerIcon"}},[a("v-list",{staticClass:"grey lighten-4",attrs:{dense:""}},[t._l(t.items,function(e,n){return[a("v-list-item",{key:n,attrs:{to:e.to}},[a("v-list-item-action",[a("v-icon",[t._v(t._s(e.icon))])],1),a("v-list-item-content",[a("v-list-item-title",{staticClass:"grey--text"},[t._v(t._s(e.text))])],1)],1)]})],2)],1)},Ut=[],Jt={data:function(){return{items:[{icon:"lightbulb_outline",text:"Agencias",to:{name:"agencies"}},{icon:"lightbulb_outline",text:"Menú persistente",to:{name:"persistantMenu"}},{icon:"touch_app",text:"Intenciones",to:{name:"intent"}}]}}},zt=Jt,Gt=a("1800"),Wt=a("f774"),Qt=Object(l["a"])(zt,Ft,Ut,!1,null,"46122870",null),Xt=Qt.exports;u()(Qt,{VIcon:U["a"],VList:Ot["a"],VListItem:St["a"],VListItemAction:Gt["a"],VListItemContent:jt["a"],VListItemTitle:jt["b"],VNavigationDrawer:Wt["a"]}),n["a"].component("chronometer",j),n["a"].component("richMessage",kt),n["a"].component("toolbar",Et),n["a"].component("snackbar",Bt),n["a"].component("drawer",Xt),window.axios=V.a,window.axios.defaults.timeout=1e4,window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",window.axios.defaults.headers.common["Authorization"]="Bearer "+localStorage.getItem("token");var Ht={formattedDate:function(t){var e=new Date(t);return e.toLocaleString()}},Yt={install:function(t){t.helpers=Ht,t.prototype.$helpers=Ht}};n["a"].use(Yt);a("d5e8"),a("d1e7");n["a"].config.productionTip=!1,new n["a"]({vuetify:s,router:y,store:w,render:function(t){return t(v)}}).$mount("#app")},"64fb":function(t,e,a){"use strict";var n=a("91f4"),o=a.n(n);o.a},"6d75":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{"grid-list-xs":""}},[a("v-layout",{attrs:{column:"","align-center":""}},[a("v-card",{attrs:{width:"500"}},[a("v-toolbar",{attrs:{color:"primary"}},[a("v-toolbar-title",{staticClass:"white--text",attrs:{color:"primary"}},[t._v("Inicio de sesión")])],1),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":t.lazy},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{counter:20,rules:t.nameRules,label:"Nombres",required:""},model:{value:t.user.first_name,callback:function(e){t.$set(t.user,"first_name",e)},expression:"user.first_name"}}),a("v-text-field",{attrs:{counter:20,rules:t.nameRules,label:"Apellidos",required:""},model:{value:t.user.last_name,callback:function(e){t.$set(t.user,"last_name",e)},expression:"user.last_name"}}),a("v-text-field",{attrs:{rules:t.emailRules,label:"E-mail",required:""},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}}),a("v-text-field",{attrs:{type:t.show1?"text":"password","append-icon":t.show1?"visibility":"visibility_off",counter:12,rules:t.nameRules,label:"contraseña",required:""},on:{"click:append":function(e){t.show1=!t.show1}},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}}),a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.registerUser(t.user)}}},[t._v("Registrar")])],1)],1)],1)],1)],1)},o=[],s=(a("bc3a"),{data:function(){return{user:{first_name:"",last_name:"",email:"",password:""},show1:!1,valid:!0,name:"",nameRules:[function(t){return!!t||"Name is required"},function(t){return t&&t.length<=20||"Nombre debe ser menos de 15 caracteres"}],email:"",emailRules:[function(t){return!!t||"E-mail is required"},function(t){return/.+@.+\..+/.test(t)||"E-mail debe ser válido"}],lazy:!1}},methods:{validate:function(){this.$refs.form.validate()&&(this.snackbar=!0)},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},registerUser:function(t){var e=this;this.$store.dispatch("register",t).then(function(t){console.log(t),e.$store.dispatch("showSnackbar",t),e.$router.push({name:"login"})}).catch(function(t){console.log(t)})}}}),r=s,i=a("2877"),l=a("6544"),c=a.n(l),u=a("8336"),d=a("b0af"),f=a("99d9"),p=a("a523"),v=a("4bd4"),m=a("a722"),b=a("8654"),h=a("71d9"),g=a("2a7f"),_=Object(i["a"])(r,n,o,!1,null,"61d03f04",null);e["default"]=_.exports;c()(_,{VBtn:u["a"],VCard:d["a"],VCardText:f["b"],VContainer:p["a"],VForm:v["a"],VLayout:m["a"],VTextField:b["a"],VToolbar:h["a"],VToolbarTitle:g["a"]})},"71ce":function(t,e,a){"use strict";var n=a("a808"),o=a.n(n);o.a},7761:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("h1",[t._v("Listado de Intents de Charly Bot")]),a("ul",t._l(t.intents,function(e,n){return a("li",{key:e.id},[a("span",{staticClass:"title"},[t._v("Intención "+t._s(n+1)+" :")]),a("router-link",{staticClass:"link",attrs:{to:{name:"updateIntent",params:{id:t.getIntentId(e.name)}}}},[t._v(t._s(e.displayName))])],1)}),0)])},o=[],s=function(t){var e=t.substring(t.lastIndexOf("/")+1,t.length);return e},r=(a("bc3a"),{data:function(){return{}},computed:{intents:function(){return this.$store.state.intents}},methods:{getIntentId:function(t){return s(t)},hasRichMessage:function(t){t=JSON.parse(t);for(var e=0;e<t.length;e++){var a=t[e];if(4==a.type)return!0}return!1}}}),i=r,l=(a("71ce"),a("2877")),c=a("6544"),u=a.n(c),d=a("a523"),f=Object(l["a"])(i,n,o,!1,null,"392eabe0",null);e["default"]=f.exports;u()(f,{VContainer:d["a"]})},"91f4":function(t,e,a){},"927d":function(t,e,a){},"99f1":function(t,e,a){"use strict";var n=a("927d"),o=a.n(n);o.a},a808:function(t,e,a){},bd01:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{"grid-list-xs":""}},[a("v-layout",{attrs:{column:"","align-center":""}},[a("v-card",{attrs:{width:"500"}},[a("v-toolbar",{attrs:{color:"primary"}},[a("v-toolbar-title",{staticClass:"white--text",attrs:{color:"primary"}},[t._v("Inicio de sesión")])],1),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":t.lazy},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{rules:t.emailRules,label:"E-mail",required:""},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}}),a("v-text-field",{attrs:{type:t.show1?"text":"password","append-icon":t.show1?"visibility":"visibility_off",counter:10,rules:t.nameRules,label:"contraseña",required:""},on:{"click:append":function(e){t.show1=!t.show1}},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}}),a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.login(t.user.email,t.user.password)}}},[t._v("Ingresar")])],1)],1)],1)],1)],1)},o=[],s=(a("bc3a"),a("1858"),{data:function(){return{show1:!1,user:{email:"",password:""},valid:!0,name:"",nameRules:[function(t){return!!t||"Name is required"},function(t){return t&&t.length<=10||"Name must be less than 10 characters"}],email:"",emailRules:[function(t){return!!t||"E-mail is required"},function(t){return/.+@.+\..+/.test(t)||"E-mail must be valid"}],lazy:!1}},methods:{validate:function(){this.$refs.form.validate()&&(this.snackbar=!0)},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},login:function(t,e){var a=this;this.$store.dispatch("login",{email:t,password:e}).then(function(t){a.$store.dispatch("showSnackbar",{res:t,color:"success"}),console.log("mensaje del servidor: ",t),a.$router.push({name:"intent"})}).catch(function(t){return console.log(t)})}}}),r=s,i=a("2877"),l=a("6544"),c=a.n(l),u=a("8336"),d=a("b0af"),f=a("99d9"),p=a("a523"),v=a("4bd4"),m=a("a722"),b=a("8654"),h=a("71d9"),g=a("2a7f"),_=Object(i["a"])(r,n,o,!1,null,"f00ccaf6",null);e["default"]=_.exports;c()(_,{VBtn:u["a"],VCard:d["a"],VCardText:f["b"],VContainer:p["a"],VForm:v["a"],VLayout:m["a"],VTextField:b["a"],VToolbar:h["a"],VToolbarTitle:g["a"]})},ca63:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("div",{staticClass:"display-1 mb-4"},[t._v("Nombre de la intención: "+t._s(t.intent.displayName))]),a("v-text-field",{staticClass:"intentName",attrs:{label:"Nombre de la intención"},model:{value:t.intent.displayName,callback:function(e){t.$set(t.intent,"displayName",e)},expression:"intent.displayName"}}),a("h3",[t._v("Frases de entrenamiento")]),a("v-text-field",{attrs:{"prepend-inner-icon":"mdi-format-quote-close",placeholder:"Añade una frase de entrenamiento"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addTrainingPhrase(t.intent.trainingPhrases,t.newTrainingPhrase)}},model:{value:t.newTrainingPhrase,callback:function(e){t.newTrainingPhrase=e},expression:"newTrainingPhrase"}}),t._l(t.intent.trainingPhrases,function(e,n){return a("div",{key:"part"+n},t._l(e.parts,function(o,s){return a("v-row",{key:"row"+s,attrs:{align:"center"}},[a("v-col",{staticClass:"text-center",attrs:{cols:"12",sm:"1"}},[t._v(t._s(n+1))]),a("v-col",{attrs:{cols:"12",sm:"11"}},[o.userDefined?a("p",[t._v(t._s(o.text)+" | variable del sistema para consulta con Base de datos")]):a("v-text-field",{attrs:{"append-outer-icon":"mdi-delete","prepend-inner-icon":"mdi-format-quote-close"},on:{"click:append-outer":function(a){return t.deleteTrainingPhrase(s,e.parts)}},model:{value:o.text,callback:function(e){t.$set(o,"text",e)},expression:"phrase.text"}})],1)],1)}),1)}),a("v-divider",{staticClass:"my-7"}),a("h3",[t._v("Respuestas")]),a("draggable",{attrs:{handle:".handle",animation:300},on:{end:t.onChange},model:{value:t.intent.messages,callback:function(e){t.$set(t.intent,"messages",e)},expression:"intent.messages"}},[a("transition-group",t._l(t.intent.messages,function(e,n){return a("div",{key:"tab"+n},[e.hasOwnProperty("text")?a("div",[a("v-card",{staticClass:"mb-3"},[a("v-toolbar",{staticClass:"handle",attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[t._v("Mensaje multiple")]),a("v-spacer"),a("v-btn",{attrs:{color:"error"},on:{click:function(e){return t.deleteResponse(n)}}},[t._v("Eliminar")])],1),a("v-card-text",{staticClass:"px-8"},[t._l(e.text.text,function(n,o){return a("v-layout",{attrs:{"align-center":"",row:""}},[a("v-flex",{staticClass:"text-center",attrs:{xs1:""}},[t._v(t._s(o+1))]),a("v-flex",{attrs:{xs11:""}},[a("v-textarea",{attrs:{"append-outer-icon":"mdi-delete",rows:"1","auto-grow":""},on:{"click:append-outer":function(a){return t.deleteResponseVariant(o,e.text.text)}},model:{value:e.text.text[o],callback:function(a){t.$set(e.text.text,o,a)},expression:"message.text.text[textIndex]"}})],1)],1)}),a("v-layout",{attrs:{"align-center":"",row:""}},[a("v-flex",{staticClass:"text-center",attrs:{xs1:""}},[t._v("*")]),a("v-textarea",{attrs:{clearable:"",placeholder:"Añadir una variante a la respuesta",rows:"1","auto-grow":""},on:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.addResponseVariante(n,e.text.text,t.responseVariant[n])}},model:{value:t.responseVariant[n],callback:function(e){t.$set(t.responseVariant,n,e)},expression:"responseVariant[i]"}}),a("v-flex",{attrs:{xs11:""}})],1)],2)],1)],1):t._e(),e.hasOwnProperty("payload")?a("div",[a("v-card",{staticClass:"mb-3"},[a("v-toolbar",{staticClass:"handle",attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[t._v("Rich Message")]),a("v-spacer"),a("v-btn",{attrs:{color:"error"},on:{click:function(e){return t.deleteResponse(n)}}},[t._v("Eliminar")])],1),1==t.visible?a("rich-message",{ref:"richMessageRef",refInFor:!0,attrs:{index:n,data:e.payload},on:{onSave:t.updateLocalData,"update:index":function(t){n=t},"update:data":function(a){return t.$set(e,"payload",a)}}}):t._e()],1)],1):t._e()])}),0)],1),a("v-btn",{attrs:{color:"error",text:"",to:{name:"intent"}}},[t._v("Atras")]),a("v-btn",{staticClass:"ml-3",attrs:{color:"success"},on:{click:function(e){return t.updateIntent(t.intent)}}},[t._v("Guardar")]),a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({staticClass:"ml-3",attrs:{color:"primary"}},n),[t._v("Añadir respuesta")])]}}])},[a("v-list",t._l(t.options,function(e,n){return a("v-list-item",{key:n,on:{click:function(a){return t.createResponse(e.id)}}},[a("v-list-item-title",[t._v(t._s(e.title))])],1)}),1)],1)],2)},o=[],s=(a("ac6a"),a("7f7f"),a("6762"),a("2fdb"),a("7514"),a("bc3a")),r=a.n(s),i=a("310e"),l=a.n(i),c=(a("6b54"),a("0267")),u=function(){var t={message:"text",platform:"PLATFORM_UNSPECIFIED",text:{text:["Nuevo mensaje"]}};return t},d=function(){var t={message:"payload",platform:"PLATFORM_UNSPECIFIED",payload:Object(c["a"])({facebook:{text:"¿Aceptas?",quick_replies:[{content_type:"text",title:"si",payload:"si_intent_payload",image_url:""},{content_type:"text",title:"no",payload:"no_intent_payload",image_url:""}]}})};return t},f=function(){var t={message:"payload",payload:Object(c["a"])({facebook:{attachment:{type:"template",payload:{template_type:"button",text:"Este mensaje va junto al boton",buttons:[{type:"web_url",title:"edita",url:"https://developers.facebook.com/docs/messenger-platform/send-messages/template/list"}]}}}}),platform:"PLATFORM_UNSPECIFIED"};return t},p=function(){var t={message:"payload",payload:Object(c["a"])({facebook:{attachment:{type:"template",payload:{template_type:"generic",elements:[{title:"PANTALLA 01",image_url:"http://4.bp.blogspot.com/-_QCxfa0Jjv4/U1h7FRoJnAI/AAAAAAAAAYg/lbU-uWs5T-M/s1600/cpa-school-test.png",subtitle:"Descripcion de la pantalla 01",buttons:[{type:"postback",title:"boton 01",payload:"button1_payload"},{type:"postback",title:"boton 02",payload:"button2_payload"},{type:"postback",title:"boton 03",payload:"button3_payload"}]}]}}}}),platform:"PLATFORM_UNSPECIFIED"};return t},v={components:{draggable:l.a},data:function(){return{newTrainingPhrase:"",responseVariant:[],visible:1,options:[{id:1,title:"Mensaje simple"},{id:2,title:"Boton"},{id:3,title:"Menú carrusel"},{id:4,title:"Quick Replies"}],intent:{}}},mounted:function(){this.getInitialData(),console.log("intent recibido: ",this.intent)},methods:{deleteTrainingPhrase:function(t,e){e.splice(t,1)},addTrainingPhrase:function(t,e){t.push({parts:[{text:e,entityType:"",alias:"",userDefined:!1}],name:"be6f229c-44c2-496f-929d-7f79c7395b9d",type:"EXAMPLE",timesAddedCount:0}),this.newTrainingPhrase=""},deleteResponseVariant:function(t,e){e.splice(t,1)},addResponseVariante:function(t,e,a){console.log("llegaron estas respuestas: ",e),e.push(a),this.responseVariant[t]="",console.log("añadiendo variante a la respuesta: ",t)},onChange:function(){var t=this;console.log("hubo un cambio"),this.visible=0,setTimeout(function(){t.visible=1},500)},getInitialData:function(){var t=this;this.intent=this.$store.state.intents.find(function(e){return e.name.includes(t.$route.params.id)}),this.intent.messages.forEach(function(e){t.responseVariant.push("")})},updateLocalData:function(t){var e=t.data,a=t.index;console.log("nos quedamos aca"),console.log("anteriormente tenias: ",this.structToJson(this.intent.messages[a].payload,a).facebook.attachment.payload),this.intent.messages[a].payload=this.jsonToStruct(e),console.log("datos del padre actualizado con: ",e.facebook.attachment.payload)},updateIntent:function(t){var e=this;this.$store.dispatch("showOverlay",{active:!0,text:"Guardando"}),this.$refs.richMessageRef&&this.$refs.richMessageRef.forEach(function(a){var n=a.index,o=a.jsonData;t.messages[n].payload=e.jsonToStruct(o)}),r.a.put("/api/chatbot/agent/intents/update",{newIntent:t}).then(function(t){t.data.ok?(console.log("intent actualizado con exito"),console.log(t.data),e.$store.dispatch("showSnackbar",{text:"Cambios guardados con éxito",color:"success"})):(console.error(t.data),e.$store.dispatch("showSnackbar",{text:"Algo salió mal",color:"error"}))}).catch(function(t){console.log(t),e.$store.dispatch("showSnackbar",{text:"Algo salió mal",color:"error"})}).finally(function(){e.$store.dispatch("showOverlay",{active:!1,text:""})})},createResponse:function(t){var e=this.intent;switch(t){case 1:console.log("para pushear: ",e),e.messages.push(u());break;case 2:console.log("seleccionado: ",f()),e.messages.push(f());break;case 3:console.log("seleccionado: ",p()),e.messages.push(p());break;case 4:console.log("seleccionado: ",p()),e.messages.push(d());break;default:break}this.intent=e},deleteResponse:function(t){console.log("se eliminara: ",t),this.intent.messages.splice(t,1)},jsonToStruct:function(t){return Object(c["a"])(t)},structToJson:function(t){return Object(c["b"])(t)}}},m=v,b=(a("0819"),a("2877")),h=a("6544"),g=a.n(h),_=a("8336"),y=a("b0af"),x=a("99d9"),k=a("62ad"),V=a("a523"),w=a("ce7e"),T=a("0e8f"),C=a("a722"),I=a("8860"),$=a("da13"),O=a("5d23"),S=a("e449"),j=a("0fd9"),R=a("2fa4"),A=a("8654"),E=a("a844"),L=a("71d9"),P=a("2a7f"),M=Object(b["a"])(m,n,o,!1,null,"178ad14a",null);e["default"]=M.exports;g()(M,{VBtn:_["a"],VCard:y["a"],VCardText:x["b"],VCol:k["a"],VContainer:V["a"],VDivider:w["a"],VFlex:T["a"],VLayout:C["a"],VList:I["a"],VListItem:$["a"],VListItemTitle:O["b"],VMenu:S["a"],VRow:j["a"],VSpacer:R["a"],VTextField:A["a"],VTextarea:E["a"],VToolbar:L["a"],VToolbarTitle:P["a"]})},f25b:function(t,e,a){},ff18:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ma-auto"},[a("h1",[t._v("Esta pagina no esta disponible...")]),a("v-btn",{attrs:{color:"error"},on:{click:function(e){return t.back()}}},[t._v("Volver")])],1)},o=[],s={methods:{back:function(){console.log(this.$router.go(-1))}}},r=s,i=a("2877"),l=a("6544"),c=a.n(l),u=a("8336"),d=Object(i["a"])(r,n,o,!1,null,"87a43c1e",null);e["default"]=d.exports;c()(d,{VBtn:u["a"]})},fff1:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("div",{staticClass:"display-1"},[t._v("Gestión de Agencias")]),a("v-divider"),a("v-data-table",{staticClass:"elevation-1",attrs:{search:t.search,headers:t.headers,items:t.agencies,"sort-by":"calories"},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Listado")]),a("v-spacer"),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-dialog",{attrs:{persistent:"","max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},n),[t._v("Agregar")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-text-field",{attrs:{label:"Nombre de la agencia"},model:{value:t.editedItem.agency_name,callback:function(e){t.$set(t.editedItem,"agency_name",e)},expression:"editedItem.agency_name"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-select",{attrs:{items:t.regions,"item-text":"name",label:"Listado de regiones","item-value":"id"},model:{value:t.selectedRegion,callback:function(e){t.selectedRegion=e},expression:"selectedRegion"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-textarea",{attrs:{label:"Horarios"},model:{value:t.editedItem.schedule,callback:function(e){t.$set(t.editedItem,"schedule",e)},expression:"editedItem.schedule"}})],1),a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-text-field",{attrs:{label:"Dirección"},model:{value:t.editedItem.address,callback:function(e){t.$set(t.editedItem,"address",e)},expression:"editedItem.address"}})],1),a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-text-field",{attrs:{label:"Referencia"},model:{value:t.editedItem.reference,callback:function(e){t.$set(t.editedItem,"reference",e)},expression:"editedItem.reference"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("CANCELAR")]),a("v-btn",{attrs:{color:"success"},on:{click:t.save}},[t._v("GUARDAR")])],1)],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(e){var n=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{color:"success",small:""},on:{click:function(e){return t.editItem(n)}}},[t._v("edit")]),a("v-icon",{attrs:{color:"error",small:""},on:{click:function(e){return t.deleteItem(n)}}},[t._v("delete")])]}}])})],1)},o=[],s=(a("7514"),a("7f7f"),{data:function(){return{selectedRegion:null,search:"",regions:[],agencies:[],dialog:!1,headers:[{text:"Agencia",align:"left",sortable:!1,value:"agency_name"},{text:"Region",value:"name"},{text:"Horario",value:"schedule"},{text:"Ubicación",value:"address"},{text:"Referencia",value:"reference"},{text:"Actions",value:"action",sortable:!1}],editedIndex:-1,editedItem:{agency_name:"",region:1,schedule:"",address:"",reference:""},defaultItem:{agency_name:"",region:1,schedule:"",address:"",reference:""}}},computed:{formTitle:function(){return-1===this.editedIndex?"Nueva agencia":"Editar Agencia"}},watch:{dialog:function(t){t||this.close()}},created:function(){this.initialData()},methods:{initialData:function(){var t=this;axios.get("/api/chatbot/agent/agencies/list").then(function(e){e.data.ok?(console.log(e.data),t.agencies=e.data.payload):console.error(e.data)}).catch(function(t){console.log(t)}),axios.get("/api/chatbot/agent/regions/list").then(function(e){e.data.ok?(console.log(e.data),t.regions=e.data.payload):console.error(e.data)}).catch(function(t){console.log(t)})},getRegionName:function(t){return this.regions.find(function(e){return e.id==t}).name},editItem:function(t){this.editedIndex=this.agencies.indexOf(t),this.editedItem=Object.assign({},t),this.selectedRegion=this.editedItem.region,this.dialog=!0},deleteItem:function(t){var e=this.agencies.indexOf(t);confirm("¿Seguro que quieres eliminar esta agencia?")&&this.agencies.splice(e,1)},close:function(){var t=this;this.dialog=!1,setTimeout(function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1},300)},save:function(){var t=this;this.editedIndex>-1?Object.assign(this.agencies[this.editedIndex],this.editedItem):(console.log("se guardara: ",this.editedItem),this.editedItem.region=this.selectedRegion,axios.post("/api/chatbot/agent/agencies/create",{newAgency:this.editedItem}).then(function(e){e.data.ok?(console.log(e.data),t.agencies.push(t.editedItem)):console.error(e.data)}).catch(function(t){console.log(t)})),this.close()}}}),r=s,i=a("2877"),l=a("6544"),c=a.n(l),u=a("8336"),d=a("b0af"),f=a("99d9"),p=a("a523"),v=a("8fea"),m=a("169a"),b=a("ce7e"),h=a("0e8f"),g=a("132d"),_=a("a722"),y=a("b974"),x=a("2fa4"),k=a("8654"),V=a("a844"),w=a("71d9"),T=a("2a7f"),C=Object(i["a"])(r,n,o,!1,null,"154ba9cd",null);e["default"]=C.exports;c()(C,{VBtn:u["a"],VCard:d["a"],VCardActions:f["a"],VCardText:f["b"],VCardTitle:f["c"],VContainer:p["a"],VDataTable:v["a"],VDialog:m["a"],VDivider:b["a"],VFlex:h["a"],VIcon:g["a"],VLayout:_["a"],VSelect:y["a"],VSpacer:x["a"],VTextField:k["a"],VTextarea:V["a"],VToolbar:w["a"],VToolbarTitle:T["a"]})}});
//# sourceMappingURL=app.08183d44.js.map