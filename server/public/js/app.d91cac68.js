(function(t){function e(e){for(var n,r,i=e[0],l=e[1],c=e[2],d=0,p=[];d<i.length;d++)r=i[d],o[r]&&p.push(o[r][0]),o[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(p.length)p.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,i=1;i<a.length;i++){var l=a[i];0!==o[l]&&(n=!1)}n&&(s.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},o={app:0},s=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0e27":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v("servicios caja")])},o=[],s={},r=s,i=a("2877"),l=Object(i["a"])(r,n,o,!1,null,"72f95ab8",null);e["default"]=l.exports},"1c2d":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("toolbar"),a("v-content",[a("router-view")],1)],1)},o=[],s={},r=s,i=a("2877"),l=a("6544"),c=a.n(l),u=a("a75b"),d=Object(i["a"])(r,n,o,!1,null,"4a1e8974",null);e["default"]=d.exports;c()(d,{VContent:u["a"]})},"3a10":function(t,e,a){},4601:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"keep"}},[a("toolbar"),a("drawer"),t.isDataReady?a("v-content",[a("v-fade-transition",{attrs:{mode:"out-in"}},[a("router-view")],1)],1):t._e(),a("v-overlay",{attrs:{value:t.overlay}},[a("v-progress-circular",{attrs:{size:70,width:3,color:"primary",indeterminate:""}}),a("p",{staticClass:"ml-n3"},[t._v(t._s(t.overlayText))])],1)],1)},o=[],s=a("bc3a"),r=a.n(s),i={props:{source:String},data:function(){return{drawer:null,items:[{icon:"lightbulb_outline",text:"Intenciones",to:"intent"}],isDataReady:!1}},mounted:function(){this.getInitialData(),this.$store.dispatch("initialLoad")},methods:{getInitialData:function(){var t=this;this.$store.dispatch("showOverlay",{active:!0,text:"Cargando datos"}),r.a.get("/api/chatbot/agent/intents").then(function(e){e.data.ok?(t.$store.dispatch("setIntents",e.data.payload),t.isDataReady=!0):console.error(e.data)}).catch(function(e){if("ECONNABORTED"!==e.code)throw console.log(e),e;console.log("se excedio el tiempo limite"),t.$store.dispatch("showSnackbar",{text:"Algo salió mal",color:"error"})}).finally(function(){t.$store.dispatch("showOverlay",{active:!1,text:"Cargando datos"})})}},computed:{overlay:function(){return this.$store.state.overlay.active},overlayText:function(){return this.$store.state.overlay.text}}},l=i,c=(a("99f1"),a("2877")),u=a("6544"),d=a.n(u),p=a("7496"),v=a("a75b"),m=a("0789"),f=a("a797"),b=a("490a"),h=Object(c["a"])(l,n,o,!1,null,null,null);e["default"]=h.exports;d()(h,{VApp:p["a"],VContent:v["a"],VFadeTransition:m["b"],VOverlay:f["a"],VProgressCircular:b["a"]})},"4b34":function(t,e,a){"use strict";var n=a("bf76"),o=a.n(n);o.a},"4ba3":function(t,e,a){},"559a":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",{attrs:{align:"center"}},[a("h1",{staticClass:"display-3"},[t._v("Menú persistente")]),a("v-btn",{staticClass:"ml-5",attrs:{color:"primary"},on:{click:t.addOption}},[t._v("Añadir Opción")])],1),t._l(t.options,function(e,n){return a("v-card",{key:n,staticClass:"mb-5 pa-5",attrs:{outlined:""}},[a("v-row",{attrs:{justify:"space-between"}},[a("strong",{staticClass:"title"},[t._v("Configuración del botón "+t._s(n+1))]),a("v-btn",{attrs:{color:"error"},on:{click:function(e){return t.deleteOption(n)}}},[t._v("Eliminar")])],1),a("v-row",[a("v-col",[a("p",{staticClass:"subtitle-1"},[t._v("Tipo:")]),a("v-radio-group",{staticClass:"ma-0 ml-5",attrs:{row:""},on:{change:function(a){return t.changeButtonType(t.options,n,e.type)}},model:{value:e.type,callback:function(a){t.$set(e,"type",a)},expression:"option.type"}},[a("v-radio",{attrs:{label:"POSTBACK",value:"postback"}}),a("v-radio",{attrs:{label:"ENLACE WEB",value:"web_url"}})],1)],1)],1),a("v-text-field",{attrs:{outlined:"",clearable:"",label:"Nombre del botón"},model:{value:e.title,callback:function(a){t.$set(e,"title",a)},expression:"option.title"}}),"postback"==e.type?a("v-text-field",{attrs:{outlined:"",clearable:"",label:"Mensaje de emparejamiento (para DialogFlow)"},model:{value:e.payload,callback:function(a){t.$set(e,"payload",a)},expression:"option.payload"}}):a("v-text-field",{attrs:{outlined:"",clearable:"",label:"Dirección URL"},model:{value:e.url,callback:function(a){t.$set(e,"url",a)},expression:"option.url"}})],1)}),a("v-btn",{attrs:{color:"success"},on:{click:function(e){return t.setPersistantMenu(t.options)}}},[t._v("Guardar")])],2)},o=[],s={data:function(){return{options:[]}},mounted:function(){this.getInitialData()},methods:{setPersistantMenu:function(t){var e=this;this.$store.dispatch("showOverlay",{active:!0,text:"Actualizando"}),axios.post("/api/chatbot/agent/persistantmenu",{buttons:t}).then(function(t){t.data.ok&&(e.$store.dispatch("showOverlay",{active:!1,text:""}),e.$store.dispatch("showSnackbar",{text:t.data.message,color:"success"}))}).catch(function(t){console.error(t)}).finally(function(){e.$store.dispatch("showOverlay",{active:!1,text:"Actualizando"})})},getInitialData:function(){var t=this;axios.get("/api/chatbot/agent/persistantmenu/list").then(function(e){console.log(e),e.data.ok&&(t.options=e.data.payload)}).catch(function(t){console.error(t)})},changeButtonType:function(t,e,a){"postback"==a&&t.splice(e,1,{payload:"",type:"postback",title:t[e].title}),"web_url"==a&&t.splice(e,1,{type:"web_url",url:"",title:t[e].title})},addOption:function(){this.options.push({title:"Boton de ejemplo",type:"web_url",url:"https://developers.facebook.com"})},deleteOption:function(t){this.options.splice(t,1)}}},r=s,i=a("2877"),l=a("6544"),c=a.n(l),u=a("8336"),d=a("b0af"),p=a("62ad"),v=a("a523"),m=a("67b6"),f=a("43a6"),b=a("0fd9"),h=a("8654"),g=Object(i["a"])(r,n,o,!1,null,"fcf953fa",null);e["default"]=g.exports;c()(g,{VBtn:u["a"],VCard:d["a"],VCol:p["a"],VContainer:v["a"],VRadio:m["a"],VRadioGroup:f["a"],VRow:b["a"],VTextField:h["a"]})},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),o=(a("5363"),a("f309"));n["a"].use(o["a"]);var s=new o["a"]({icons:{iconfont:"mdi"}}),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("v-app",[a("router-view"),a("snackbar")],1)],1)},i=[],l=a("2877"),c=a("6544"),u=a.n(c),d=a("7496"),p={},v=Object(l["a"])(p,r,i,!1,null,null,null),m=v.exports;u()(v,{VApp:d["a"]});var f=a("8c4f"),b=a("1858"),h=a.n(b);n["a"].use(f["a"]);var g=[{path:"/dashboard",component:a("4601").default,meta:{requiresAuth:!0},children:[{path:"",name:"dashboard",redirect:{name:"intent"}},{path:"intenciones",name:"intent",component:a("7761").default},{path:"intenciones/:id",name:"updateIntent",component:a("ca63").default},{path:"menu-persistente",name:"persistantMenu",component:a("559a").default},{path:"agencias",name:"agencies",component:a("fff1").default}]},{path:"/",component:a("1c2d").default,meta:{guest:!0},children:[{path:"",redirect:"/login"},{path:"/login",name:"login",component:a("bd01").default},{path:"registro",name:"register",component:a("6d75").default}]},{path:"/webview",component:a("0e27").default},{path:"*",component:a("ff18").default}],_=new f["a"]({routes:g,mode:"history"});_.beforeEach(function(t,e,a){if(t.matched.some(function(t){return t.meta.requiresAuth}))if(null==h.a.getItem("token"))a({name:"login",params:{nextUrl:t.fullPath}});else{var n=JSON.parse(h.a.getItem("user"));t.matched.some(function(t){return t.meta.requiresAuth})?"ADMIN"==n.role?a():a({name:"dashboard"}):a()}else t.matched.some(function(t){return t.meta.guest})?null==h.a.getItem("token")?a():a({name:"dashboard"}):a()});var k=_,y=a("2f62"),x=a("bc3a"),w=a.n(x);n["a"].prototype.$axios=w.a,n["a"].use(y["a"]);var V=new y["a"].Store({state:{status:"",token:h.a.getItem("token")||"",user:JSON.parse(h.a.getItem("user"))||{},intents:[],loggingIn:!1,loginError:null,loginSuccessful:!1,snackbar:{text:"",active:!1,color:"success"},toolbar:{drawerIcon:null},overlay:{active:!1,text:""}},mutations:{auth_request:function(t){t.status="loading"},setIntents:function(t,e){t.intents=e},logout:function(t){t.status="",t.token="",t.loggingIn=!1},auth_success:function(t,e){var a=e.token,n=e.user;t.status="success",t.token=a,t.user=n,t.loggingIn=!0},auth_error:function(t){t.status="error"},showSnackbar:function(t,e){var a=e.text,n=e.color;t.snackbar.text=a,t.snackbar.color=n,t.snackbar.active=!0},initialLoad:function(t){t.loggingIn=!0,t.loggingIn=!0},showOverlay:function(t,e){var a=e.active,n=e.text;t.overlay.active=a,t.overlay.text=n}},actions:{showSnackbar:function(t,e){var a=t.commit,n=e.text,o=e.color;a("showSnackbar",{text:n,color:o})},showOverlay:function(t,e){var a=t.commit,n=e.active,o=e.text;a("showOverlay",{active:n,text:o})},register:function(t,e){var a=t.commit;return new Promise(function(t,n){a("auth_request"),w.a.post("/api/register",{first_name:e.first_name,last_name:e.last_name,email:e.email,password:e.password}).then(function(e){e.data.ok?t(e.data.message):n(e.data)}).catch(function(t){n(t)})})},login:function(t,e){var a=t.commit;return new Promise(function(t,n){a("auth_request"),w.a.post("/api/login",{email:e.email,password:e.password}).then(function(e){if(e.data.ok){console.log(e.data);var n=e.data.token,o=e.data.payload;h.a.setItem("token",n),h.a.setItem("user",JSON.stringify(o)),w.a.defaults.headers.common["Authorization"]=n,a("auth_success",{token:n,user:o}),t(e.data.message)}}).catch(function(t){a("auth_error"),h.a.removeItem("token"),t.response&&(console.error(t.response.data),n(t))})})},setIntents:function(t,e){var a=t.commit;a("setIntents",e)},logout:function(t){var e=t.commit;e("logout"),h.a.removeItem("token")},initialLoad:function(t){var e=t.commit;e("initialLoad")}},getters:{isLoggedIn:function(t){return!!t.token},authStatus:function(t){return t.status}}}),C=(a("3a10"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("p",[t._v("\n    Tiempo transcurrido:\n    "+t._s(t.hours)+" :\n    "+t._s(t._f("zeroPad")(t.minutes))+" :\n    "+t._s(t._f("zeroPad")(t.seconds))+" :\n    "+t._s(t._f("zeroPad")(t.milliSeconds,3))+"\n  ")]),t.isRunning?t._e():a("v-btn",{attrs:{outline:"",color:"primary",dark:""},on:{click:t.startTimer}},[t._v("EMPEZAR")]),t.isRunning?a("v-btn",{attrs:{outline:"",color:"success",dark:"",disabled:!t.isRunning},on:{click:t.pushTime}},[t._v("VUELTA")]):t._e(),t.isRunning?a("v-btn",{attrs:{outline:"",color:"error",dark:"",disabled:!t.isRunning},on:{click:t.stopTimer}},[t._v("DETENER")]):t._e(),t.isRunning?a("v-btn",{attrs:{outline:"",color:"black",dark:""},on:{click:t.clearAll}},[t._v("BORRAR")]):t._e(),a("ul",t._l(t.laps,function(e){return a("li",[t._v("\n      "+t._s(e.hours)+" :\n      "+t._s(t._f("zeroPad")(e.minutes))+" :\n      "+t._s(t._f("zeroPad")(e.seconds))+" :\n      "+t._s(t._f("zeroPad")(e.milliSeconds,3))+"\n    ")])}),0)],1)}),T=[],$=(a("6b54"),a("f576"),{mounted:function(){console.log("esto hay en laps: ",this.laps)},props:["laps"],data:function(){return{times:[],animateFrame:0,nowTime:0,diffTime:0,startTime:0,isRunning:!1}},methods:{setSubtractStartTime:function(t){t="undefined"!==typeof t?t:0;this.startTime=Math.floor(performance.now()-t)},startTimer:function(){var t=this;t.setSubtractStartTime(t.diffTime),function e(){t.nowTime=Math.floor(performance.now()),t.diffTime=t.nowTime-t.startTime,t.animateFrame=requestAnimationFrame(e)}(),t.isRunning=!0},stopTimer:function(){this.$emit("stop",this.times),this.isRunning=!1,cancelAnimationFrame(this.animateFrame)},pushTime:function(){this.times.push({hours:this.hours,minutes:this.minutes,seconds:this.seconds,milliSeconds:this.milliSeconds})},clearAll:function(){this.startTime=0,this.nowTime=0,this.diffTime=0,this.times=[],this.stopTimer(),this.animateFrame=0}},computed:{hours:function(){return Math.floor(this.diffTime/1e3/60/60)},minutes:function(){return Math.floor(this.diffTime/1e3/60)%60},seconds:function(){return Math.floor(this.diffTime/1e3)%60},milliSeconds:function(){return Math.floor(this.diffTime%1e3)}},filters:{zeroPad:function(t,e){e="undefined"!==typeof e?e:2;return t.toString().padStart(e,"0")}}}),S=$,j=a("8336"),I=Object(l["a"])(S,C,T,!1,null,"3d3d6e8e",null),O=I.exports;u()(I,{VBtn:j["a"]});var R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v("rich message")])},A=[],E={},P=E,M=Object(l["a"])(P,R,A,!1,null,"390c57dd",null),B=M.exports,q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app-bar",{attrs:{dark:"",app:"","clipped-left":"",color:"#1867C0"}},[a("v-app-bar-nav-icon",{on:{click:function(e){t.drawer=!t.drawer}}}),a("span",{staticClass:"title ml-3 mr-5"},[t._v("Charly Bot")]),a("v-spacer"),t.$store.state.token?t._e():a("v-btn",{attrs:{dark:"",outlined:"",to:{name:"login"}}},[t._v("Iniciar Sesión")]),t.$store.state.token?t._e():a("v-btn",{attrs:{dark:"",outlined:"",to:{name:"register"}}},[t._v("Registro")]),t.$store.state.token?a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({attrs:{text:"",color:"white",dark:""}},n),[t._v("\n        "+t._s(t.user)+"\n        "),a("v-icon",[t._v("mdi-menu-down")])],1)]}}],null,!1,288738371)},[a("v-list",[a("v-list-item",{on:{click:t.logout}},[a("v-list-item-title",[t._v("Cerrar sesión")])],1)],1)],1):t._e()],1)},F=[],L={computed:{drawer:{get:function(){return this.$store.state.toolbar.drawerIcon},set:function(t){this.$store.state.toolbar.drawerIcon=t}},user:function(){return this.$store.state.user.first_name}},methods:{logout:function(){this.$store.dispatch("logout"),this.$router.push({name:"login"})}}},N=L,D=a("40dc"),U=a("5bc1"),G=a("132d"),J=a("8860"),z=a("da13"),Q=a("5d23"),W=a("e449"),X=a("2fa4"),K=Object(l["a"])(N,q,F,!1,null,"66625501",null),Y=K.exports;u()(K,{VAppBar:D["a"],VAppBarNavIcon:U["a"],VBtn:j["a"],VIcon:G["a"],VList:J["a"],VListItem:z["a"],VListItemTitle:Q["b"],VMenu:W["a"],VSpacer:X["a"]});var H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-snackbar",{attrs:{color:t.snackbarColor,timeout:3e3},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n  "+t._s(t.snackbarText)+"\n  "),a("v-btn",{attrs:{text:""},on:{click:function(e){t.snackbar=!1}}},[t._v("Close")])],1)},Z=[],tt={computed:{snackbar:{get:function(){return this.$store.state.snackbar.active},set:function(t){this.$store.state.snackbar.active=t}},snackbarText:function(){return this.$store.state.snackbar.text},snackbarColor:function(){return this.$store.state.snackbar.color}}},et=tt,at=a("2db4"),nt=Object(l["a"])(et,H,Z,!1,null,"2138636a",null),ot=nt.exports;u()(nt,{VBtn:j["a"],VSnackbar:at["a"]});var st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-navigation-drawer",{attrs:{app:"",clipped:"",color:"grey lighten-4"},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-list",{staticClass:"grey lighten-4",attrs:{dense:""}},[t._l(t.items,function(e,n){return[a("v-list-item",{key:n,attrs:{to:e.to},on:{click:function(t){}}},[a("v-list-item-action",[a("v-icon",[t._v(t._s(e.icon))])],1),a("v-list-item-content",[a("v-list-item-title",{staticClass:"grey--text"},[t._v(t._s(e.text))])],1)],1)]})],2)],1)},rt=[],it={data:function(){return{items:[{icon:"lightbulb_outline",text:"Menú Persistente",to:{name:"persistantMenu"}},{icon:"lightbulb_outline",text:"Intenciones",to:{name:"intent"}}]}},computed:{drawer:{get:function(){return this.$store.state.toolbar.drawerIcon},set:function(t){this.$store.state.toolbar.drawerIcon=t}}}},lt=it,ct=a("1800"),ut=a("f774"),dt=Object(l["a"])(lt,st,rt,!1,null,"60b38366",null),pt=dt.exports;u()(dt,{VIcon:G["a"],VList:J["a"],VListItem:z["a"],VListItemAction:ct["a"],VListItemContent:Q["a"],VListItemTitle:Q["b"],VNavigationDrawer:ut["a"]}),n["a"].component("chronometer",O),n["a"].component("richMessage",B),n["a"].component("toolbar",Y),n["a"].component("snackbar",ot),n["a"].component("drawer",pt),window.axios=w.a,window.axios.defaults.timeout=1e4,window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",window.axios.defaults.headers.common["Authorization"]="Bearer "+localStorage.getItem("auth_token");var vt={formattedDate:function(t){var e=new Date(t);return e.toLocaleString()}},mt={install:function(t){t.helpers=vt,t.prototype.$helpers=vt}};n["a"].use(mt);a("d5e8"),a("d1e7");n["a"].config.productionTip=!1,new n["a"]({vuetify:s,router:k,store:V,render:function(t){return t(m)}}).$mount("#app")},"6d75":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[a("v-toolbar-title",[t._v("Inicio de Sesión")]),a("div",{staticClass:"flex-grow-1"})],1),a("v-card-text",[a("v-form",[a("v-text-field",{attrs:{name:"nombres",label:"nombres"},model:{value:t.user.first_name,callback:function(e){t.$set(t.user,"first_name",e)},expression:"user.first_name"}}),a("v-text-field",{attrs:{name:"Apellidos",label:"Apellidos"},model:{value:t.user.last_name,callback:function(e){t.$set(t.user,"last_name",e)},expression:"user.last_name"}}),a("v-text-field",{attrs:{label:"email",name:"email","prepend-icon":"person",type:"text"},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}}),a("v-text-field",{attrs:{id:"password",label:"Password",name:"password","prepend-icon":"lock",type:"password"},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}})],1)],1),a("v-card-actions",[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.register(t.user)}}},[t._v("Registrar")])],1)],1)],1)],1)},o=[],s={data:function(){return{user:{first_name:"",last_name:"",email:"",password:""}}},methods:{register:function(t){var e=this;this.$store.dispatch("register",t).then(function(t){e.$store.dispatch("showSnackbar",{text:t,color:"success"}),e.$router.push({name:"dashboard"})}).catch(function(t){console.log(t)})}}},r=s,i=a("2877"),l=a("6544"),c=a.n(l),u=a("8336"),d=a("b0af"),p=a("99d9"),v=a("62ad"),m=a("4bd4"),f=a("0fd9"),b=a("8654"),h=a("71d9"),g=a("2a7f"),_=Object(i["a"])(r,n,o,!1,null,"7087b378",null);e["default"]=_.exports;c()(_,{VBtn:u["a"],VCard:d["a"],VCardActions:p["a"],VCardText:p["b"],VCol:v["a"],VForm:m["a"],VRow:f["a"],VTextField:b["a"],VToolbar:h["a"],VToolbarTitle:g["a"]})},7761:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("h1",{staticClass:"display-3"},[t._v("Listado de intenciones de Charly Bot")]),a("v-row",{attrs:{align:"center"}},[a("v-col",[a("v-text-field",{attrs:{label:"Buscar intención"},model:{value:t.intentToFind,callback:function(e){t.intentToFind=e},expression:"intentToFind"}})],1)],1),a("div",{staticClass:"pa-10"},[a("v-simple-table",[a("thead",[a("tr",[a("th",{staticClass:"text-center"},[t._v("Nro")]),a("th",{staticClass:"text-center"},[t._v("Intención")])])]),a("tbody",t._l(t.filteredIntents,function(e,n){return a("tr",{key:n},[a("td",{staticClass:"text-center title"},[t._v(t._s(n+1))]),a("td",{staticClass:"text-center title"},[a("router-link",{attrs:{to:{name:"updateIntent",params:{id:t.extractIntentId(e.name)}}}},[t._v(t._s(e.displayName))])],1)])}),0)])],1)],1)},o=[];a("6762"),a("2fdb"),a("55dd");function s(t){var e=t.substring(t.lastIndexOf("/")+1,t.length);return e}var r={data:function(){return{intentToFind:""}},computed:{intents:function(){return this.$store.state.intents.sort(function(t,e){var a=t.displayName.toUpperCase(),n=e.displayName.toUpperCase();return a<n?-1:a>n?1:0})},filteredIntents:function(){var t=this;return this.intents.filter(function(e){return e.displayName.toLowerCase().includes(t.intentToFind.toLowerCase())})}},methods:{extractIntentId:function(t){return s(t)}}},i=r,l=a("2877"),c=a("6544"),u=a.n(c),d=a("62ad"),p=a("a523"),v=a("0fd9"),m=a("1f4f"),f=a("8654"),b=Object(l["a"])(i,n,o,!1,null,"a096db38",null);e["default"]=b.exports;u()(b,{VCol:d["a"],VContainer:p["a"],VRow:v["a"],VSimpleTable:m["a"],VTextField:f["a"]})},"927d":function(t,e,a){},"99f1":function(t,e,a){"use strict";var n=a("927d"),o=a.n(n);o.a},"9d20":function(t,e,a){"use strict";var n=a("4ba3"),o=a.n(n);o.a},bd01:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[a("v-toolbar-title",[t._v("Inicio de Sesión")]),a("div",{staticClass:"flex-grow-1"})],1),a("v-card-text",[a("v-form",[a("v-text-field",{attrs:{label:"email","prepend-icon":"person",type:"text"},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}}),a("v-text-field",{attrs:{label:"Password","prepend-icon":"lock",type:"password"},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}})],1)],1),a("v-card-actions",[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.login(t.user)}}},[t._v("Ingresar")])],1)],1)],1)],1)},o=[],s={data:function(){return{user:{email:"",password:""}}},methods:{login:function(t){var e=this;this.$store.dispatch("login",t).then(function(t){e.$store.dispatch("showSnackbar",{text:t,color:"success"}),e.$router.push({name:"dashboard"})}).catch(function(t){e.$store.dispatch("showSnackbar",{text:"Usuario o contraseña incorrectos",color:"error"})})}}},r=s,i=a("2877"),l=a("6544"),c=a.n(l),u=a("8336"),d=a("b0af"),p=a("99d9"),v=a("62ad"),m=a("4bd4"),f=a("0fd9"),b=a("8654"),h=a("71d9"),g=a("2a7f"),_=Object(i["a"])(r,n,o,!1,null,"54f0d192",null);e["default"]=_.exports;c()(_,{VBtn:u["a"],VCard:d["a"],VCardActions:p["a"],VCardText:p["b"],VCol:v["a"],VForm:m["a"],VRow:f["a"],VTextField:b["a"],VToolbar:h["a"],VToolbarTitle:g["a"]})},bf76:function(t,e,a){},ca63:function(t,e,a){"use strict";a.r(e);var n,o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.intent?a("v-container",[a("h1",[t._v("Nombre de la intención: "+t._s(t.intent.displayName))]),a("v-container",{staticClass:"pa-8"},[a("v-text-field",{attrs:{label:"Nombre de la intención"},model:{value:t.intent.displayName,callback:function(e){t.$set(t.intent,"displayName",e)},expression:"intent.displayName"}}),a("div",{staticClass:"title"},[t._v("Frases de entrenamiento")]),a("v-text-field",{attrs:{label:"Añade una frase de entrenamiento","prepend-inner-icon":"mdi-format-quote-close"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addTrainingPhrase(t.newTrainingPhrase)}},model:{value:t.newTrainingPhrase,callback:function(e){t.newTrainingPhrase=e},expression:"newTrainingPhrase"}}),t._l(t.trainingPhrases,function(e,n){return a("v-row",{key:n,attrs:{align:"center"}},[a("v-col",{attrs:{cols:"12",sm:"1"}},[a("p",{staticClass:"text-center"},[t._v(t._s(n+1))])]),a("v-col",{staticClass:"pa-0",attrs:{cols:"12",sm:"10"}},[a("v-text-field",{attrs:{"prepend-inner-icon":"mdi-format-quote-close"},model:{value:e.parts[0].text,callback:function(a){t.$set(e.parts[0],"text",a)},expression:"trainingPhrase.parts[0].text"}})],1),a("v-col",{attrs:{cols:"12",sm:"1"}},[a("v-btn",{attrs:{icon:""},on:{click:function(e){return t.deleteTrainingPhrase(n)}}},[a("v-icon",[t._v("mdi-delete")])],1)],1)],1)})],2),a("div",{staticClass:"title"},[t._v("Respuestas")]),a("draggable",{attrs:{handle:".my-handle",animation:300},on:{change:t.rerenderComponents},model:{value:t.intent.messages,callback:function(e){t.$set(t.intent,"messages",e)},expression:"intent.messages"}},[a("transition-group",t._l(t.intent.messages,function(e,n){return a("v-card",{key:"mensaje"+n},[e.hasOwnProperty("text")?a("div",[a("v-card-title",{staticClass:"primary my-handle",on:{click:function(t){}}},[a("v-icon",{staticClass:"mr-4",attrs:{dark:""}},[t._v("mdi-magnify")]),a("h2",{staticClass:"white--text title"},[t._v("Mensaje Múltiple")]),a("v-spacer"),a("v-btn",{attrs:{small:"",color:"error"},on:{click:function(e){return t.deleteMessage(n)}}},[t._v("Eliminar")])],1),a("v-container",t._l(e.text.text,function(o,s){return a("v-row",{key:"multiple"+s,attrs:{align:"center"}},[a("v-col",{staticClass:"text-center",attrs:{cols:"12",sm:"1"}},[t._v(t._s(s+1))]),a("v-col",{attrs:{cols:"12",sm:"11"}},[a("v-textarea",{attrs:{"append-outer-icon":"mdi-delete",rows:"1","auto-grow":""},on:{"click:append-outer":function(e){return t.deleteFallbackResponse(n,s)}},model:{value:e.text.text[s],callback:function(a){t.$set(e.text.text,s,a)},expression:"multipleMessage.text.text[messageIndex]"}})],1)],1)}),1)],1):t._e(),e.hasOwnProperty("payload")?a("div",[a("v-card-title",{staticClass:"primary my-handle",on:{click:function(t){}}},[a("v-icon",{staticClass:"mr-4",attrs:{dark:""}},[t._v("mdi-magnify")]),a("h2",{staticClass:"white--text title"},[t._v("Rich Message")]),a("v-spacer"),a("v-btn",{attrs:{small:"",color:"error"},on:{click:function(e){return t.deleteMessage(n)}}},[t._v("Eliminar")])],1),a("v-container",[t.rerender?t._e():a(t.dynamicComponent(t.typeRichMessage(n)),{tag:"component",attrs:{index:n,data:t.structProtoToJson(e.payload)},on:{onSaveGeneric:t.saveGeneric,onSaveButton:t.saveButton,onSaveQuickReply:t.saveQuickReply}})],1)],1):t._e()])}),1)],1),a("v-btn",{attrs:{text:"",color:"error",to:{name:"dashboard"}}},[t._v("Atras")]),a("v-btn",{staticClass:"ml-3",attrs:{color:"success"},on:{click:function(e){return t.saveIntent(t.intent)}}},[t._v("Guardar")]),a("v-menu",{attrs:{"open-on-hover":"",top:"","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({staticClass:"ml-3",attrs:{color:"primary"}},n),[t._v("Añadir respuesta")])]}}],null,!1,443868537)},[a("v-list",[a("v-list-item",{on:{click:function(e){return t.insertElement("simpleMessage")}}},[a("v-list-item-title",[t._v("Mensaje Simple")])],1),a("v-list-item",{on:{click:function(e){return t.insertElement("button")}}},[a("v-list-item-title",[t._v("Botón")])],1),a("v-list-item",{on:{click:function(e){return t.insertElement("generic")}}},[a("v-list-item-title",[t._v("Menú Carrusel")])],1),a("v-list-item",{on:{click:function(e){return t.insertElement("quickReply")}}},[a("v-list-item-title",[t._v("Quick replies")])],1)],1)],1)],1):t._e()},s=[],r=(a("7f7f"),a("6762"),a("2fdb"),a("7514"),a("ac6a"),a("5df3"),a("4f7f"),a("bd86")),i=a("7618");function l(t){var e={};for(var a in t)e[a]=d(t[a]);return{fields:e}}var c=(n={},Object(r["a"])(n,Object(i["a"])(0),"numberValue"),Object(r["a"])(n,Object(i["a"])(""),"stringValue"),Object(r["a"])(n,Object(i["a"])(!1),"boolValue"),n),u=new Set(["numberValue","stringValue","boolValue"]);function d(t){var e={};if(null===t)e.kind="nullValue",e.nullValue="NULL_VALUE";else if(t instanceof Array)e.kind="listValue",e.listValue={values:t.map(d)};else if("object"===Object(i["a"])(t))e.kind="structValue",e.structValue=l(t);else if(Object(i["a"])(t)in c){var a=c[Object(i["a"])(t)];e.kind=a,e[a]=t}else console.warn("Unsupported value type ",Object(i["a"])(t));return e}function p(t){if(!t||!t.fields)return{};var e={};for(var a in t.fields)e[a]=v(t.fields[a]);return e}function v(t){return t&&t.kind?u.has(t.kind)?t[t.kind]:"nullValue"===t.kind?null:"listValue"===t.kind?(t.listValue&&t.listValue.values||console.warn("Invalid JSON list value proto: ",JSON.stringify(t)),t.listValue.values.map(v)):"structValue"===t.kind?p(t.structValue):(console.warn("Unsupported JSON value proto kind: ",t.kind),null):null}var m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("strong",[t._v("Rich message de tipo: generic")]),a("br"),a("v-dialog",{attrs:{width:"800"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a("v-btn",t._g({attrs:{color:"primary",dark:""}},Object.assign({},o,n)),[t._v("Editar")])]}}],null,!0)},[a("span",[t._v("Editar pantallas")])])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[t._v("Mensaje tipo generic")])],1),a("v-container",[a("v-tabs",[t._l(t.elements,function(e,n){return a("v-tab",{key:n},[a("v-icon",{attrs:{left:""}},[t._v("mdi-access-point")]),t._v("\n            "+t._s(n+1)+". "+t._s(e.title)+"\n          ")],1)}),t._l(t.elements,function(e,n){return a("v-tab-item",{key:"pantallas"+n},[a("v-card",{attrs:{flat:""}},[a("v-container",[a("v-row",[a("v-text-field",{staticClass:"mx-3",attrs:{clearable:"",label:"Título"},model:{value:e.title,callback:function(a){t.$set(e,"title",a)},expression:"element.title"}}),a("v-text-field",{staticClass:"mx-3",attrs:{clearable:"",label:"Descripción"},model:{value:e.subtitle,callback:function(a){t.$set(e,"subtitle",a)},expression:"element.subtitle"}})],1),a("v-text-field",{attrs:{clearable:"",label:"URL de la imagen"},model:{value:e.image_url,callback:function(a){t.$set(e,"image_url",a)},expression:"element.image_url"}}),a("div",{staticClass:"headline"},[t._v("Botones")]),t._l(e.buttons,function(o,s){return a("v-row",{key:s,staticClass:"ml-4"},[a("span",{staticClass:"title"},[t._v("Botón "+t._s(s+1))]),a("v-btn",{staticClass:"ml-3",attrs:{small:"",color:"error"},on:{click:function(a){return t.deleteButtonScreen(e.buttons,s)}}},[t._v("Eliminar")]),a("v-col",{staticClass:"ma-0",attrs:{cols:"12",sm:"12"}},[a("v-row",[a("p",{staticClass:"subtitle-1"},[t._v("Tipo:")]),a("v-radio-group",{staticClass:"ma-0 ml-5",attrs:{row:""},on:{change:function(a){return t.changeButtonType(e.buttons,n,s,o.type)}},model:{value:o.type,callback:function(e){t.$set(o,"type",e)},expression:"button.type"}},[a("v-radio",{attrs:{label:"POSTBACK",value:"postback"}}),a("v-radio",{attrs:{label:"ENLACE WEB",value:"web_url"}})],1)],1)],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-text-field",{attrs:{clearable:"",label:"texto del botón"},model:{value:o.title,callback:function(e){t.$set(o,"title",e)},expression:"button.title"}})],1),a("v-col",{attrs:{cols:"12",sm:"6"}},["postback"==o.type?a("v-text-field",{attrs:{clearable:"",label:"Mensaje de emparejamiento"},model:{value:o.payload,callback:function(e){t.$set(o,"payload",e)},expression:"button.payload"}}):t._e(),"web_url"==o.type?a("v-text-field",{attrs:{clearable:"",label:"Url"},model:{value:o.url,callback:function(e){t.$set(o,"url",e)},expression:"button.url"}}):t._e()],1)],1)}),a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{sm:"4"}},[a("v-card",{staticClass:"pa-3",attrs:{outlined:""}},[a("strong",[t._v("Vista previa del rich message")]),e.image_url?a("v-img",{attrs:{src:e.image_url,"aspect-ratio":"1.7",contain:""}}):t._e(),a("strong",[t._v(t._s(e.title))]),a("p",[t._v(t._s(e.subtitle))]),t._l(e.buttons,function(e){return a("v-btn",{key:e.id,staticClass:"wrapText",attrs:{block:"",outlined:"",color:"primary"}},[t._v(t._s(e.title))])})],2)],1)],1)],2)],1)],1)})],2)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"success"},on:{click:function(e){t.dialog=!1,t.saveGeneric()}}},[t._v("Guardar")])],1)],1)],1),a("v-row",{attrs:{justify:"center"}},[t._l(t.elements,function(e,n){return a("v-col",{key:e.id,attrs:{sm:"3"}},[a("v-btn",{attrs:{small:"",color:"error"},on:{click:function(e){return t.deleteGenericScreen(n)}}},[t._v("Eliminar")]),a("v-card",{staticClass:"pa-3",attrs:{outlined:""}},[a("strong",[t._v("Vista previa del rich message")]),e.image_url?a("v-img",{attrs:{src:e.image_url,"aspect-ratio":"1.7",contain:""}}):t._e(),a("strong",[t._v(t._s(e.title))]),a("p",[t._v(t._s(e.subtitle))]),t._l(e.buttons,function(e){return a("v-btn",{key:e.id,staticClass:"wrapText",attrs:{block:"",outlined:"",color:"primary"}},[t._v(t._s(e.title))])})],2)],1)}),a("v-btn",{attrs:{color:"primary"},on:{click:t.addGenericScreen}},[t._v("Añadir otra pantalla")])],2)],1)},f=[],b={props:["data","index"],name:"generic",data:function(){return{dialog:!1,elements:this.data.facebook.attachment.payload.elements}},methods:{deleteButtonScreen:function(t,e){t.splice(e,1)},deleteGenericScreen:function(t){this.elements.splice(t,1)},changeButtonType:function(t,e,a,n){"postback"==n&&t.splice(a,1,{payload:"",type:"postback",title:t[a].title}),"web_url"==n&&t.splice(a,1,{type:"web_url",url:"",title:t[a].title})},saveGeneric:function(){var t=this.data;t.facebook.attachment.payload.elements=this.elements,this.$emit("onSaveGeneric",t,this.index)},addGenericScreen:function(){this.elements.push({title:"Créditos",buttons:[{payload:"boton 01",type:"postback",title:"boton 01"},{type:"postback",title:"boton 02",payload:"boton 02"},{title:"boton 03",payload:"boton 03",type:"postback"}],subtitle:"Contamos con las siguientes opciones",image_url:"http://4.bp.blogspot.com/-_QCxfa0Jjv4/U1h7FRoJnAI/AAAAAAAAAYg/lbU-uWs5T-M/s1600/cpa-school-test.png"}),this.saveGeneric()}}},h=b,g=(a("4b34"),a("2877")),_=a("6544"),k=a.n(_),y=a("8336"),x=a("b0af"),w=a("99d9"),V=a("62ad"),C=a("a523"),T=a("169a"),$=a("ce7e"),S=a("132d"),j=a("adda"),I=a("67b6"),O=a("43a6"),R=a("0fd9"),A=a("2fa4"),E=a("71a3"),P=a("c671"),M=a("fe57"),B=a("8654"),q=a("71d9"),F=a("2a7f"),L=a("3a2f"),N=Object(g["a"])(h,m,f,!1,null,"4e1e94be",null),D=N.exports;k()(N,{VBtn:y["a"],VCard:x["a"],VCardActions:w["a"],VCol:V["a"],VContainer:C["a"],VDialog:T["a"],VDivider:$["a"],VIcon:S["a"],VImg:j["a"],VRadio:I["a"],VRadioGroup:O["a"],VRow:R["a"],VSpacer:A["a"],VTab:E["a"],VTabItem:P["a"],VTabs:M["a"],VTextField:B["a"],VToolbar:q["a"],VToolbarTitle:F["a"],VTooltip:L["a"]});var U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("strong",[t._v("Rich message de tipo: quick reply")]),a("br"),a("v-dialog",{attrs:{width:"800"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a("v-btn",t._g({attrs:{color:"primary",dark:""}},Object.assign({},o,n)),[t._v("Editar")])]}}],null,!0)},[a("span",[t._v("Editar quick reply")])])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[t._v("Mensaje tipo Quick Reply")])],1),a("v-container",{staticClass:"pa-5"},[a("p",[t._v("Mensaje que acompaña al quick reply (obligatorio)")]),a("v-text-field",{attrs:{outlined:""},model:{value:t.quickReplies.text,callback:function(e){t.$set(t.quickReplies,"text",e)},expression:"quickReplies.text"}}),t._l(t.quickReplies.quick_replies,function(e,n){return a("v-row",{key:n},[a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-text-field",{attrs:{label:"Texto del quick reply "+(n+1)},model:{value:e.title,callback:function(a){t.$set(e,"title",a)},expression:"quickReply.title"}}),a("v-text-field",{attrs:{label:"Mensaje de emparejamiento (para DialogFlow) "},model:{value:e.payload,callback:function(a){t.$set(e,"payload",a)},expression:"quickReply.payload"}}),a("v-text-field",{attrs:{label:"URL de la imagen"},model:{value:e.image_url,callback:function(a){t.$set(e,"image_url",a)},expression:"quickReply.image_url"}})],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-card",{staticClass:"pa-5",attrs:{outlined:""}},[a("strong",[t._v("Vista previa")]),a("br"),a("v-btn",{attrs:{outlined:"",text:"",color:"primary"}},[t._v(t._s(e.title))])],1),a("v-btn",{attrs:{small:"",color:"error"}},[t._v("Eliminar")])],1),a("div",{staticClass:"bottonLine"})],1)})],2),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:t.addQuickReply}},[t._v("Agregar quick reply (max 15)")]),a("v-btn",{attrs:{color:"success"},on:{click:function(e){t.dialog=!1,t.saveQuickReply()}}},[t._v("Guardar")])],1)],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{sm:"6"}},[a("v-card",{staticClass:"pa-5",attrs:{outlined:""}},[a("strong",[t._v("Vista previa del rich message:")]),a("v-divider"),a("p",[t._v(t._s(t.quickReplies.text))]),t._l(t.quickReplies.quick_replies,function(e,n){return a("v-btn",{key:n,attrs:{text:"",outlined:"",color:"primary"}},[t._v(t._s(e.title))])})],2)],1)],1)],1)},G=[],J={props:["data","index"],data:function(){return{dialog:!1,quickReplies:this.data.facebook}},methods:{addQuickReply:function(){this.quickReplies.quick_replies.push({image_url:"",content_type:"text",title:"ejemplo",payload:"ejemplo_payload"})},saveQuickReply:function(){var t=this.data;t.facebook=this.quickReplies,this.$emit("onSaveQuickReply",t,this.index)}}},z=J,Q=(a("9d20"),Object(g["a"])(z,U,G,!1,null,"590c644c",null)),W=Q.exports;k()(Q,{VBtn:y["a"],VCard:x["a"],VCardActions:w["a"],VCol:V["a"],VContainer:C["a"],VDialog:T["a"],VDivider:$["a"],VRow:R["a"],VSpacer:A["a"],VTextField:B["a"],VToolbar:q["a"],VToolbarTitle:F["a"],VTooltip:L["a"]});var X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("strong",[t._v("Rich message de tipo: button")]),a("br"),a("v-dialog",{attrs:{width:"800"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a("v-btn",t._g({attrs:{color:"primary",dark:""}},Object.assign({},o,n)),[t._v("Editar")])]}}],null,!0)},[a("span",[t._v("editar")])])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[t._v("Editar mensaje de tipo botón")])],1),a("v-container",[a("v-text-field",{attrs:{label:"Mensaje que acompaña al botón (Obligatorio)"},model:{value:t.buttons.text,callback:function(e){t.$set(t.buttons,"text",e)},expression:"buttons.text"}}),a("v-row",{attrs:{align:"center"}},[a("v-col",{attrs:{cols:"12",sm:"6"}},t._l(t.buttons.buttons,function(e,n){return a("v-col",{key:n,attrs:{cols:"12"}},[a("v-text-field",{attrs:{clearable:"",outlined:"",label:"Texto del botón "+(n+1)},model:{value:e.title,callback:function(a){t.$set(e,"title",a)},expression:"button.title"}}),a("v-text-field",{attrs:{clearable:"",outlined:"",label:"URL del botón "+(n+1)},model:{value:e.url,callback:function(a){t.$set(e,"url",a)},expression:"button.url"}})],1)}),1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-card",{staticClass:"pa-5",attrs:{outlined:""}},[a("strong",[t._v("Vista previa del rich message")]),a("p",[t._v(t._s(t.buttons.text))]),t._l(t.buttons.buttons,function(e,n){return a("v-btn",{key:n,attrs:{block:"",outlined:"",color:"primary"}},[t._v(t._s(e.title))])})],2)],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:t.addButton}},[t._v("Añadir otro botón (MAX 3)")]),a("v-btn",{staticClass:"ml-3",attrs:{color:"success"},on:{click:function(e){t.dialog=!1,t.saveButton()}}},[t._v("Guardar")])],1)],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{sm:"4"}},[a("v-card",{staticClass:"pa-5",attrs:{outlined:""}},[a("strong",[t._v("Vista previa del rich message")]),a("p",[t._v(t._s(t.buttons.text))]),t._l(t.buttons.buttons,function(e,n){return a("v-btn",{key:n,attrs:{block:"",outlined:"",color:"primary"}},[t._v(t._s(e.title))])})],2)],1)],1)],1)},K=[],Y={props:["data","index"],data:function(){return{dialog:!1,buttons:this.data.facebook.attachment.payload}},methods:{addButton:function(){this.buttons.buttons.push({type:"web_url",url:"https://developers.facebook.com/docs/messenger-platform/send-messages/template/list",title:"Ejemplo"})},saveButton:function(){var t=this.data;t.facebook.attachment.payload=this.buttons,this.$emit("onSaveButton",t,this.index)}}},H=Y,Z=Object(g["a"])(H,X,K,!1,null,"2ec5851e",null),tt=Z.exports;function et(){return{platform:"PLATFORM_UNSPECIFIED",text:{text:["Nuevo mensaje"]},message:"text"}}k()(Z,{VBtn:y["a"],VCard:x["a"],VCardActions:w["a"],VCol:V["a"],VContainer:C["a"],VDialog:T["a"],VDivider:$["a"],VRow:R["a"],VSpacer:A["a"],VTextField:B["a"],VToolbar:q["a"],VToolbarTitle:F["a"],VTooltip:L["a"]});var at=function(){return{platform:"PLATFORM_UNSPECIFIED",payload:l({facebook:{attachment:{payload:{template_type:"generic",elements:[{title:"Créditos",buttons:[{payload:"boton 01",type:"postback",title:"boton 01"},{type:"postback",title:"boton 02",payload:"boton 02"},{title:"boton 03",payload:"boton 03",type:"postback"}],subtitle:"Contamos con las siguientes opciones",image_url:"http://4.bp.blogspot.com/-_QCxfa0Jjv4/U1h7FRoJnAI/AAAAAAAAAYg/lbU-uWs5T-M/s1600/cpa-school-test.png"}]},type:"template"}}}),message:"payload"}},nt=function(){return{platform:"PLATFORM_UNSPECIFIED",payload:l({facebook:{text:"Ejemplo",quick_replies:[{content_type:"text",title:"iniciar sesion",payload:"login_payload",image_url:""},{content_type:"text",title:"registro",payload:"registro_payload",image_url:""}]}}),message:"payload"}},ot=function(){return{platform:"PLATFORM_UNSPECIFIED",payload:l({facebook:{attachment:{payload:{buttons:[{url:"https://developers.facebook.com/docs/messenger-platform/send-messages/template/list",title:"boton ejemplo",type:"web_url"}],template_type:"button",text:"Es obligatorio un mensaje junto al boton ⬇"},type:"template"}}}),message:"payload"}},st=a("310e"),rt=a.n(st),it={components:{draggable:rt.a},data:function(){return{rerender:!1,intent:null,newTrainingPhrase:"",components:[D,W,tt]}},mounted:function(){this.initialData()},methods:{rerenderComponents:function(){var t=this;console.log("renderizar de nuevo"),this.rerender=!0,setTimeout(function(){t.rerender=!1},200)},deleteMessage:function(t){this.intent.messages.splice(t,1)},dynamicComponent:function(t){switch(t){case"button":return this.components[2];case"generic":return this.components[0];case"quickReply":return this.components[1];default:break}},typeRichMessage:function(t){return this.structProtoToJson(this.intent.messages[t].payload).facebook.attachment?this.structProtoToJson(this.intent.messages[t].payload).facebook.attachment.payload.template_type:"quickReply"},jsonToStructProto:function(t){return l(t)},structProtoToJson:function(t){return p(t)},deleteFallbackResponse:function(t,e){this.intent.messages[t].text.text.splice(e,1)},initialData:function(){var t=this;this.intent=this.$store.state.intents.find(function(e){return e.name.includes(t.intentId)})},saveIntent:function(t){var e=this;this.$store.dispatch("showOverlay",{active:!0,text:"Actualizando"}),axios.put("/api/chatbot/agent/intents/update",{newIntent:t}).then(function(t){console.log(t),t.data.ok&&(e.$store.dispatch("showOverlay",{active:!1,text:""}),e.$store.dispatch("showSnackbar",{text:t.data.message,color:"success"}))}).catch(function(t){console.error(t)}).finally(function(){e.$store.dispatch("showOverlay",{active:!1,text:"Actualizando"})})},addTrainingPhrase:function(t){this.intent.trainingPhrases.push({parts:[{text:t,entityType:"",alias:"",userDefined:!1}],name:"be6f229c-44c2-496f-929d-7f79c7395b9d",type:"EXAMPLE",timesAddedCount:0})},deleteTrainingPhrase:function(t){this.intent.trainingPhrases.splice(t,1)},saveGeneric:function(t,e){console.log("se actualizara el generic que cuenta con es: ",this.structProtoToJson(this.intent.messages[e].payload)),console.log("a esto: ",t),this.intent.messages[e].payload=this.jsonToStructProto(t)},saveButton:function(t,e){this.intent.messages[e].payload=this.jsonToStructProto(t)},saveQuickReply:function(t,e){console.log("actualmente hay esto: ",this.intent.messages[e].payload),console.log("se guardara esto: ",this.jsonToStructProto(t),e),this.intent.messages[e].payload=this.jsonToStructProto(t)},insertElement:function(t){switch(t){case"simpleMessage":this.intent.messages.push(et());break;case"button":this.intent.messages.push(ot());break;case"generic":this.intent.messages.push(at());break;case"quickReply":console.log("se agregara el intent: ",nt()),this.intent.messages.push(nt());break;default:break}}},computed:{intentId:function(){return this.$route.params.id},trainingPhrases:function(){return this.intent.trainingPhrases}}},lt=it,ct=a("8860"),ut=a("da13"),dt=a("5d23"),pt=a("e449"),vt=a("a844"),mt=Object(g["a"])(lt,o,s,!1,null,"a5dc14d8",null);e["default"]=mt.exports;k()(mt,{VBtn:y["a"],VCard:x["a"],VCardTitle:w["c"],VCol:V["a"],VContainer:C["a"],VIcon:S["a"],VList:ct["a"],VListItem:ut["a"],VListItemTitle:dt["b"],VMenu:pt["a"],VRow:R["a"],VSpacer:A["a"],VTextField:B["a"],VTextarea:vt["a"]})},ff18:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v("pagina de error")])},o=[],s={},r=s,i=a("2877"),l=Object(i["a"])(r,n,o,!1,null,"6be65d42",null);e["default"]=l.exports},fff1:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v("agencias")])},o=[],s={},r=s,i=a("2877"),l=Object(i["a"])(r,n,o,!1,null,"333da992",null);e["default"]=l.exports}});
//# sourceMappingURL=app.d91cac68.js.map